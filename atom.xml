<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>wanglei</title>
  <subtitle>越努力,越幸运~</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.cobala.cn/"/>
  <updated>2016-06-02T04:49:55.493Z</updated>
  <id>http://www.cobala.cn/</id>
  
  <author>
    <name>wanglei</name>
    <email>860765083@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>查询表中字段重复记录的SQL</title>
    <link href="http://www.cobala.cn/2016/06/02/%E6%9F%A5%E8%AF%A2%E8%A1%A8%E4%B8%AD%E5%AD%97%E6%AE%B5%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%E7%9A%84SQL/"/>
    <id>http://www.cobala.cn/2016/06/02/查询表中字段重复记录的SQL/</id>
    <published>2016-06-02T04:37:58.000Z</published>
    <updated>2016-06-02T04:49:55.493Z</updated>
    
    <content type="html">&lt;h3 id=&quot;如何查找同一个字段有重复记录的数据&quot;&gt;&lt;a href=&quot;#如何查找同一个字段有重复记录的数据&quot; class=&quot;headerlink&quot; title=&quot;如何查找同一个字段有重复记录的数据&quot;&gt;&lt;/a&gt;如何查找同一个字段有重复记录的数据&lt;/h3&gt;&lt;h5 id=&quot;1-查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断&quot;&gt;&lt;a href=&quot;#1-查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断&quot; class=&quot;headerlink&quot; title=&quot;1. 查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断&quot;&gt;&lt;/a&gt;1. 查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断&lt;/h5&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(peopleId) &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h5 id=&quot;2-删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录&quot;&gt;&lt;a href=&quot;#2-删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录&quot; class=&quot;headerlink&quot; title=&quot;2. 删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录&quot;&gt;&lt;/a&gt;2. 删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录&lt;/h5&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(peopleId) &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;rowid&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;min&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;rowid&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(peopleId )&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;h5 id=&quot;3-查找表中多余的重复记录（多个字段）&quot;&gt;&lt;a href=&quot;#3-查找表中多余的重复记录（多个字段）&quot; class=&quot;headerlink&quot; title=&quot;3. 查找表中多余的重复记录（多个字段）&quot;&gt;&lt;/a&gt;3. 查找表中多余的重复记录（多个字段）&lt;/h5&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; vitae a  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; (a.peopleId,a.seq) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; peopleId,seq &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; vitae &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId,seq &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(*) &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h5 id=&quot;4-删除表中多余的重复记录（多个字段），只留有rowid最小的记录&quot;&gt;&lt;a href=&quot;#4-删除表中多余的重复记录（多个字段），只留有rowid最小的记录&quot; class=&quot;headerlink&quot; title=&quot;4. 删除表中多余的重复记录（多个字段），只留有rowid最小的记录&quot;&gt;&lt;/a&gt;4. 删除表中多余的重复记录（多个字段），只留有rowid最小的记录&lt;/h5&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; vitae a  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; (a.peopleId,a.seq) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; peopleId,seq &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; vitae &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId,seq &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(*) &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;rowid&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;min&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;rowid&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; vitae &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId,seq &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(*)&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h5 id=&quot;5-查找表中多余的重复记录（多个字段），不包含rowid最小的记录&quot;&gt;&lt;a href=&quot;#5-查找表中多余的重复记录（多个字段），不包含rowid最小的记录&quot; class=&quot;headerlink&quot; title=&quot;5. 查找表中多余的重复记录（多个字段），不包含rowid最小的记录&quot;&gt;&lt;/a&gt;5. 查找表中多余的重复记录（多个字段），不包含rowid最小的记录&lt;/h5&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; vitae a  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; (a.peopleId,a.seq) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; peopleId,seq &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; vitae &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId,seq &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(*) &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;rowid&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;min&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;rowid&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; vitae &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId,seq &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(*)&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;hr&gt; &lt;p&gt;&lt;a href=&quot;http://sucre.blog.51cto.com/1084905/380143&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;原文出自此处&lt;/a&gt;&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;如何查找同一个字段有重复记录的数据&quot;&gt;&lt;a href=&quot;#如何查找同一个字段有重复记录的数据&quot; class=&quot;headerlink&quot; title=&quot;如何查找同一个字段有重复记录的数据&quot;&gt;&lt;/a&gt;如何查找同一个字段有重复记录的数据&lt;/h3&gt;&lt;h5 id=&quot;1-查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断&quot;&gt;&lt;a href=&quot;#1-查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断&quot; class=&quot;headerlink&quot; title=&quot;1. 查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断&quot;&gt;&lt;/a&gt;1. 查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断&lt;/h5&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(peopleId) &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h5 id=&quot;2-删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录&quot;&gt;&lt;a href=&quot;#2-删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录&quot; class=&quot;headerlink&quot; title=&quot;2. 删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录&quot;&gt;&lt;/a&gt;2. 删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录&lt;/h5&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(peopleId) &amp;gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;rowid&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;min&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;rowid&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people &lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; peopleId &lt;span class=&quot;keyword&quot;&gt;having&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(peopleId )&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="数据库" scheme="http://www.cobala.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="数据库" scheme="http://www.cobala.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>java 中double和float类型计算丢失精度问题总结</title>
    <link href="http://www.cobala.cn/2016/05/24/%E4%B8%ADdouble%E5%92%8Cfloat%E7%B1%BB%E5%9E%8B%E8%AE%A1%E7%AE%97%E4%B8%A2%E5%A4%B1%E7%B2%BE%E5%BA%A6%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    <id>http://www.cobala.cn/2016/05/24/中double和float类型计算丢失精度问题总结/</id>
    <published>2016-05-24T09:35:11.000Z</published>
    <updated>2016-05-24T11:53:41.438Z</updated>
    
    <content type="html">&lt;h2 id=&quot;诶，我怎么不能全额退款了？&quot;&gt;&lt;a href=&quot;#诶，我怎么不能全额退款了？&quot; class=&quot;headerlink&quot; title=&quot;诶，我怎么不能全额退款了？&quot;&gt;&lt;/a&gt;诶，我怎么不能全额退款了？&lt;/h2&gt;&lt;blockquote&gt; &lt;p&gt;问题发生在某天中午，当我订单付完款后，不想要了就点击了全额退款，但是给我的提示确实 “您输入的金额不正确”，我就纳闷了，为什么不能退?按了下F12看了下请求返回的信息，看了下代码，然后就发现了问题…&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;1、bigdecimal-转换成小数计算有误差&quot;&gt;&lt;a href=&quot;#1、bigdecimal-转换成小数计算有误差&quot; class=&quot;headerlink&quot; title=&quot;1、bigdecimal 转换成小数计算有误差&quot;&gt;&lt;/a&gt;1、bigdecimal 转换成小数计算有误差&lt;/h2&gt;&lt;ul&gt; &lt;li&gt;&lt;em&gt;真实项目中校验退款金额是否超过订单实付款金额代码如下截图：&lt;/em&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;img src=&quot;http://o6skwsce0.bkt.clouddn.com/aaa.png&quot; alt=&quot;错误代码&quot;&gt;&lt;/p&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;em&gt;模拟以上的代码截图如下：&lt;/em&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;img src=&quot;http://o6skwsce0.bkt.clouddn.com/bbb.png&quot; alt=&quot;模拟代码&quot;&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;p&gt;&lt;em&gt;float和double做四则运算误差：&lt;/em&gt;&lt;/p&gt; &lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;main&lt;/span&gt;( String[] args ) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	 System&lt;span class=&quot;selector-class&quot;&gt;.out&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.println&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0.05&lt;/span&gt;+&lt;span class=&quot;number&quot;&gt;0.01&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     System&lt;span class=&quot;selector-class&quot;&gt;.out&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.println&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;0.42&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     System&lt;span class=&quot;selector-class&quot;&gt;.out&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.println&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;4.015&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     System&lt;span class=&quot;selector-class&quot;&gt;.out&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.println&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;123.3&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;span class=&quot;selector-class&quot;&gt;.060000000000000005&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.5800000000000001&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;401&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.49999999999994&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2329999999999999&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;em&gt;问题的根源：&lt;/em&gt;&lt;br&gt;为什么会出现精度丢失，得从计算机说起，计算机并不能识别除了二进制数据以外的任何数据。无论我们使用何种编程语言，在何种编译环境下工作，都要先把源程序翻译成二进制的机器码后才能被计算机识别。以上面提到的情况为例，我们源程序里的2.4是十进制的，计算机不能直接识别，要先编译成二进制。但问题来了，2.4的二进制表示并非是精确的2.4，反而最为接近的二进制表示是2.3999999999999999。原因在于浮点数由两部分组成：指数和尾数，这点如果知道怎样进行浮点数的二进制与十进制转换，应该是不难理解的。如果在这个转换的过程中，浮点数参与了计算，那么转换的过程就会变得不可预 知，并且变得不可逆。我们有理由相信，就是在这个过程中，发生了精度的丢失。而至于为什么有些浮点计算会得到准确的结果，应该也是碰巧那个计算的二进制与 十进制之间能够准确转换。而当输出单个浮点型数据的时候，可以正确输出，如double d = 2.4;System.out.println(d);&lt;br&gt;输出的是2.4，而不是2.3999999999999999。也就是说，不进行浮点计算的时候，在十进制里浮点数能正确显示。这更印证了我以上的想法，即如果浮点数参与了计算，那么浮点数二进制与十进制间的转换过程就会变得不可预知，并且变得不可逆。&lt;/p&gt; &lt;p&gt;事实上，浮点数并不适合用于精确计算，而适合进行科学计算。这里有一个小知识：既然float和double型用来表示带有小数点的数，那为什么我们不称 它们为“小数”或者“实数”，要叫浮点数呢？因为这些数都以科学计数法的形式存储。当一个数如50.534，转换成科学计数法的形式为5.053e1，它 的小数点移动到了一个新的位置（即浮动了）。可见，浮点数本来就是用于科学计算的，用来进行精确计算实在太不合适了。&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;2、bigdecimal构造函数使用不当时，结果仍然异常&quot;&gt;&lt;a href=&quot;#2、bigdecimal构造函数使用不当时，结果仍然异常&quot; class=&quot;headerlink&quot; title=&quot;2、bigdecimal构造函数使用不当时，结果仍然异常&quot;&gt;&lt;/a&gt;2、bigdecimal构造函数使用不当时，结果仍然异常&lt;/h2&gt;&lt;figure class=&quot;highlight arduino&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; main(&lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt;[] args) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal aa = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;number&quot;&gt;0.31&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal bb = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;number&quot;&gt;0.2&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal cc = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;number&quot;&gt;0.11&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	System.out.&lt;span class=&quot;built_in&quot;&gt;println&lt;/span&gt;(aa.subtract(bb).doubleValue()); &lt;span class=&quot;comment&quot;&gt;//转换成double&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	System.out.&lt;span class=&quot;built_in&quot;&gt;println&lt;/span&gt;(aa.subtract(bb));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	System.out.&lt;span class=&quot;built_in&quot;&gt;println&lt;/span&gt;(cc.compareTo(aa.subtract(bb))); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;0.10999999999999999&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;number&quot;&gt;0.109999999999999986677323704498121514916419982910156250&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;p&gt;BigDecimal其中一个构造函数以双精度浮点数作为输入，然而得到的结果仍然不是我们想要的。要小心使用 BigDecimal(double)构造函数，因为如果不了解它，会在计算过程中产生舍入误差。请使用基于整数或 String 的构造函数。&lt;/p&gt; &lt;h2 id=&quot;3、解决double和float精确计算有误差的方法&quot;&gt;&lt;a href=&quot;#3、解决double和float精确计算有误差的方法&quot; class=&quot;headerlink&quot; title=&quot;3、解决double和float精确计算有误差的方法&quot;&gt;&lt;/a&gt;3、解决double和float精确计算有误差的方法&lt;/h2&gt;&lt;p&gt;在《Effective Java》这本书中也提到这个原则，float和double只能用来做科学计算或者是工程计算，在商业计算中我们要用java.math.BigDecimal。使用BigDecimal并且一定要用String来够造。&lt;/p&gt; &lt;p&gt;BigDecimal用哪个构造函数？&lt;/p&gt; &lt;p&gt;BigDecimal(double val) &lt;/p&gt; &lt;p&gt;BigDecimal(String val)&lt;br&gt;上面的API简要描述相当的明确，而且通常情况下，上面的那一个使用起来要方便一些。我们可能想都不想就用上了，会有什么问题呢？等到出了问题的时候，才发现参数是double的构造方法的详细说明中有这么一段：&lt;/p&gt; &lt;p&gt;Note: the results of this constructor can be somewhat unpredictable. One might assume that new BigDecimal(.1) is exactly equal to .1, but it is actually equal to .1000000000000000055511151231257827021181583404541015625. This is so because .1 cannot be represented exactly as a double (or, for that matter, as a binary fraction of any finite length). Thus, the long value that is being passed in to the constructor is not exactly equal to .1, appearances nonwithstanding. &lt;/p&gt; &lt;p&gt;The (String) constructor, on the other hand, is perfectly predictable: new BigDecimal(“.1”) is exactly equal to .1, as one would expect. Therefore, it is generally recommended that the (String) constructor be used in preference to this one.&lt;/p&gt; &lt;p&gt;原来我们如果需要精确计算，非要用String来够造BigDecimal不可！&lt;/p&gt; &lt;p&gt;代码示例：&lt;br&gt;&lt;figure class=&quot;highlight arduino&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; main(&lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt;[] args) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal aa = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;string&quot;&gt;&quot;0.31&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal bb = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;string&quot;&gt;&quot;0.2&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal cc = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;string&quot;&gt;&quot;0.11&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	System.out.&lt;span class=&quot;built_in&quot;&gt;println&lt;/span&gt;(aa.subtract(bb).doubleValue()); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	System.out.&lt;span class=&quot;built_in&quot;&gt;println&lt;/span&gt;(aa.subtract(bb));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	System.out.&lt;span class=&quot;built_in&quot;&gt;println&lt;/span&gt;(cc.compareTo(aa.subtract(bb))); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;0.11&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;number&quot;&gt;0.11&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;h2 id=&quot;4、bigdecimal比较数值大小的方法&quot;&gt;&lt;a href=&quot;#4、bigdecimal比较数值大小的方法&quot; class=&quot;headerlink&quot; title=&quot;4、bigdecimal比较数值大小的方法&quot;&gt;&lt;/a&gt;4、bigdecimal比较数值大小的方法&lt;/h2&gt;&lt;p&gt;如浮点类型一样，BigDecimal 也有一些令人奇怪的行为。尤其在使用 equals() 方法来检测数值之间是否相等时要小心。 equals() 方法认为，两个表示同一个数但换算值不同（例如， 100.00 和 100.000 ）的 BigDecimal 值是不相等的。然而， compareTo() 方法会认为这两个数是相等的，所以在从数值上比较两个 BigDecimal 值时，应该使用 compareTo() 而不是 equals() 。&lt;/p&gt; &lt;p&gt;另外还有一些情形，任意精度的小数运算仍不能表示精确结果。例如，1 除以 9 会产生无限循环的小数 .111111… 。出于这个原因，在进行除法运算时，BigDecimal 可以让您显式地控制舍入。 movePointLeft() 方法支持 10 的幂次方的精确除法。&lt;/p&gt; &lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String[] args)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal aa = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;string&quot;&gt;&quot;0.31&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal bb = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;string&quot;&gt;&quot;0.2&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	BigDecimal cc = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BigDecimal(&lt;span class=&quot;string&quot;&gt;&quot;0.11&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; r = cc.compareTo(aa.subtract(bb));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(r==&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//等于&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(r==&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//大于&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(r==&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//小于&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h2 id=&quot;5、小结&quot;&gt;&lt;a href=&quot;#5、小结&quot; class=&quot;headerlink&quot; title=&quot;5、小结&quot;&gt;&lt;/a&gt;5、小结&lt;/h2&gt;&lt;p&gt;本人真实的项目中发现了此问题，而写这些代码的都是 “高级” 开发工程师，我不知道为什么。这能对得起 “高级工程师” 称号？（笑） &lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;诶，我怎么不能全额退款了？&quot;&gt;&lt;a href=&quot;#诶，我怎么不能全额退款了？&quot; class=&quot;headerlink&quot; title=&quot;诶，我怎么不能全额退款了？&quot;&gt;&lt;/a&gt;诶，我怎么不能全额退款了？&lt;/h2&gt;&lt;blockquote&gt; &lt;p&gt;问题发生在某天中午，当我订单付完款后，不想要了就点击了全额退款，但是给我的提示确实 “您输入的金额不正确”，我就纳闷了，为什么不能退?按了下F12看了下请求返回的信息，看了下代码，然后就发现了问题…&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;1、bigdecimal-转换成小数计算有误差&quot;&gt;&lt;a href=&quot;#1、bigdecimal-转换成小数计算有误差&quot; class=&quot;headerlink&quot; title=&quot;1、bigdecimal 转换成小数计算有误差&quot;&gt;&lt;/a&gt;1、bigdecimal 转换成小数计算有误差&lt;/h2&gt;&lt;ul&gt; &lt;li&gt;&lt;em&gt;真实项目中校验退款金额是否超过订单实付款金额代码如下截图：&lt;/em&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;img src=&quot;http://o6skwsce0.bkt.clouddn.com/aaa.png&quot; alt=&quot;错误代码&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://www.cobala.cn/categories/Java/"/>
    
    
      <category term="Java" scheme="http://www.cobala.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>微信支付之扫码支付</title>
    <link href="http://www.cobala.cn/2016/05/15/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E4%B9%8B%E6%89%AB%E7%A0%81%E6%94%AF%E4%BB%98/"/>
    <id>http://www.cobala.cn/2016/05/15/微信支付之扫码支付/</id>
    <published>2016-05-15T06:12:05.000Z</published>
    <updated>2016-05-24T11:07:29.028Z</updated>
    
    <content type="html">&lt;h2 id=&quot;微信扫码支付简介&quot;&gt;&lt;a href=&quot;#微信扫码支付简介&quot; class=&quot;headerlink&quot; title=&quot;微信扫码支付简介&quot;&gt;&lt;/a&gt;微信扫码支付简介&lt;/h2&gt;&lt;p&gt;最近项目中要接入微信支付，从&lt;a href=&quot;https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=6_1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方文档&lt;/a&gt; 上了解了下微信支付的场景及方式，由此总结了下开发需要做的事情。&lt;br&gt;微信扫码支付，简单的来说，就是你把微信支付需要的信息，生成到二维码图片中。通过微信扫一扫，发起支付。我们需要做的就是：一是：按照微信扫码支付规则生成二维码信息 二是：微信没有提供生成二维码图片的接口。需要我们自己把二维码信息生成到二维码图片中。&lt;/p&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;h2 id=&quot;1-模式的选择&quot;&gt;&lt;a href=&quot;#1-模式的选择&quot; class=&quot;headerlink&quot; title=&quot;1.模式的选择&quot;&gt;&lt;/a&gt;1.模式的选择&lt;/h2&gt;&lt;p&gt;根据官方文档微信扫码支付有两种模式，可以选择第二种模式，微信接口会返回二维码信息给我们。而第一种模式则需要我们自己去生成二维码信息。会有些麻烦。尤其是参数大小写，还有签名的问题，容易出错。总的来说第二种模式比第一种模式简单。因此我采用的是第二种模式，比较通用。京东与携程亦用的是第二种模式。&lt;/p&gt; &lt;h2 id=&quot;2-调用统一下单API，生成预支付单信息&quot;&gt;&lt;a href=&quot;#2-调用统一下单API，生成预支付单信息&quot; class=&quot;headerlink&quot; title=&quot;2.调用统一下单API，生成预支付单信息&quot;&gt;&lt;/a&gt;2.调用统一下单API，生成预支付单信息&lt;/h2&gt;&lt;p&gt;模式二的微信扫码支付，需要先调用微信的统一下单接口，生成预交易单，正确调用后，会返回含有交易标示ID 和 二维码链接的URL等信息。&lt;/p&gt; &lt;p&gt;###代码示例&lt;br&gt;&lt;figure class=&quot;highlight arduino&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HashMap&amp;lt;&lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt;&amp;gt; paramMap = Maps.newHashMap(); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;trade_type&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;NATIVE&quot;&lt;/span&gt;); &lt;span class=&quot;comment&quot;&gt;//交易类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;spbill_create_ip&quot;&lt;/span&gt;,getIp()); &lt;span class=&quot;comment&quot;&gt;//本机的Ip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;product_id&quot;&lt;/span&gt;, payOrderIdsStr); &lt;span class=&quot;comment&quot;&gt;// 商户根据自己业务传递的参数 必填&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;body&quot;&lt;/span&gt;, orderSubject);         &lt;span class=&quot;comment&quot;&gt;//描述&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;out_trade_no&quot;&lt;/span&gt;, payOrderIdsStr); &lt;span class=&quot;comment&quot;&gt;//商户 后台的贸易单号&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;total_fee&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt; + totalCount); &lt;span class=&quot;comment&quot;&gt;//金额必须为整数  单位为分&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;notify_url&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;http://xxx/wx_pay_notify&quot;&lt;/span&gt;); &lt;span class=&quot;comment&quot;&gt;//支付成功后，回调地址     &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;appid&quot;&lt;/span&gt;, siteConfig.getWxPayAppId()); &lt;span class=&quot;comment&quot;&gt;//appid&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;mch_id&quot;&lt;/span&gt;, siteConfig.getWxPayMchId()); &lt;span class=&quot;comment&quot;&gt;//商户号      &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;nonce_str&quot;&lt;/span&gt;, WeixinUtil.createNoncestr(&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;));  &lt;span class=&quot;comment&quot;&gt;//随机数  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;paramMap.&lt;span class=&quot;built_in&quot;&gt;put&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;sign&quot;&lt;/span&gt;,CommonUtilPub.getSign(paramMap,siteConfig.getWxPayPartnerKey()));&lt;span class=&quot;comment&quot;&gt;//根据微信签名规则，生成签名 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; xmlData = WeixinUtil.mapToXml(paramMap);&lt;span class=&quot;comment&quot;&gt;//把参数转换成XML数据格式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###请求数据转换成xml数据格式&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;xml&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;appid&lt;/span&gt;&amp;gt;&lt;/span&gt;wx2421b1c4370ec43b&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;appid&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;attach&lt;/span&gt;&amp;gt;&lt;/span&gt;支付测试&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;attach&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;JSAPI支付测试&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mch_id&lt;/span&gt;&amp;gt;&lt;/span&gt;10000100&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;mch_id&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;nonce_str&lt;/span&gt;&amp;gt;&lt;/span&gt;1add1a30ac87aa2db72f57a2375d8fec&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;nonce_str&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;notify_url&lt;/span&gt;&amp;gt;&lt;/span&gt;http://wxpay.weixin.qq.com/pub_v2/pay/notify.v2.php&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;notify_url&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;openid&lt;/span&gt;&amp;gt;&lt;/span&gt;oUpF8uMuAJO_M2pxb1Q9zNjWeS6o&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;openid&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;out_trade_no&lt;/span&gt;&amp;gt;&lt;/span&gt;1415659990&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;out_trade_no&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;spbill_create_ip&lt;/span&gt;&amp;gt;&lt;/span&gt;14.23.150.211&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;spbill_create_ip&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;total_fee&lt;/span&gt;&amp;gt;&lt;/span&gt;1&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;total_fee&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;trade_type&lt;/span&gt;&amp;gt;&lt;/span&gt;JSAPI&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;trade_type&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;sign&lt;/span&gt;&amp;gt;&lt;/span&gt;0CB01533B8C1EF103065174F50BCA001&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;sign&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;xml&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;PS：生成预支付单信息的时候，可以把所有的请求数据和预支付单返回的数据都存储(log日志，或者数据库)起来，方便出错后查找日志信息。&lt;/p&gt; &lt;p&gt;###发送请求数据&lt;br&gt;&lt;figure class=&quot;highlight processing&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; resXml = WeixinUtil.postData(&lt;span class=&quot;string&quot;&gt;&quot;https://api.mch.weixin.qq.com/pay/unifiedorder&quot;&lt;/span&gt;, xmlData);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; class WeixinUtil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Logger logger = LoggerFactory.getLogger(WeixinUtil.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; CONNECT_TIMEOUT = &lt;span class=&quot;number&quot;&gt;5000&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;// in milliseconds&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; DEFAULT_ENCODING = &lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; postData(&lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; urlStr, &lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; data)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; postData(urlStr, data, &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; postData(&lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; urlStr, &lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; data, &lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; contentType) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;BufferedReader&lt;/span&gt; reader = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             URL url = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; URL(urlStr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             URLConnection conn = url.openConnection();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             conn.setDoOutput(&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             conn.setConnectTimeout(CONNECT_TIMEOUT);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             conn.setReadTimeout(CONNECT_TIMEOUT);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(StringUtils.isNotBlank(contentType))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 conn.setRequestProperty(&lt;span class=&quot;string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, contentType);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             OutputStreamWriter writer = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; OutputStreamWriter(conn.getOutputStream(), DEFAULT_ENCODING);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(data == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 data = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             writer.write(data); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            writer.flush();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             writer.close();  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             reader = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BufferedReader&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; InputStreamReader(conn.getInputStream(), DEFAULT_ENCODING));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             StringBuilder sb = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; StringBuilder();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;keyword&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;line&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; ((&lt;span class=&quot;built_in&quot;&gt;line&lt;/span&gt; = reader.readLine()) != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 sb.&lt;span class=&quot;built_in&quot;&gt;append&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;line&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 sb.&lt;span class=&quot;built_in&quot;&gt;append&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;\r\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; sb.toString();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (IOException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             logger_.error(&lt;span class=&quot;string&quot;&gt;&quot;Error connecting to &quot;&lt;/span&gt; + urlStr + &lt;span class=&quot;string&quot;&gt;&quot;: &quot;&lt;/span&gt; + e.getMessage());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;#125; &lt;span class=&quot;keyword&quot;&gt;finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (reader != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     reader.close();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (IOException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;h3 id=&quot;返回的xml数据&quot;&gt;&lt;a href=&quot;#返回的xml数据&quot; class=&quot;headerlink&quot; title=&quot;返回的xml数据&quot;&gt;&lt;/a&gt;返回的xml数据&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;xml&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;return_code&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[SUCCESS]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;return_code&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;return_msg&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[OK]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;return_msg&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;appid&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[wx2421b1c4370ec43b]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;appid&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mch_id&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[10000100]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;mch_id&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;nonce_str&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[IITRi8Iabbblz1Jc]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;nonce_str&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;sign&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[7921E432F65EB8ED0CE9755F0E86D72F]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;sign&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;result_code&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[SUCCESS]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;result_code&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;prepay_id&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[wx201411101639507cbf6ffd8b0779950874]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;prepay_id&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;trade_type&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;lt;![CDATA[JSAPI]]&amp;gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;trade_type&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;xml&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;p&gt;PS：扫码支付的，我们只需关注生成的code_url 二维码链接即可。&lt;/p&gt; &lt;h2 id=&quot;3-动态生成二维码图片&quot;&gt;&lt;a href=&quot;#3-动态生成二维码图片&quot; class=&quot;headerlink&quot; title=&quot;3.动态生成二维码图片&quot;&gt;&lt;/a&gt;3.动态生成二维码图片&lt;/h2&gt;&lt;p&gt;推荐使用Google的&lt;a href=&quot;https://github.com/zxing/zxing&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;zxing&lt;/a&gt; 类库生成二维码。本人自己使用此类库简单的封装了一个&lt;a href=&quot;https://github.com/mrwlei/QRGenerator&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;小工具&lt;/a&gt; 生成二维码，使用起来非常方便。&lt;/p&gt; &lt;h3 id=&quot;页面代码&quot;&gt;&lt;a href=&quot;#页面代码&quot; class=&quot;headerlink&quot; title=&quot;页面代码&quot;&gt;&lt;/a&gt;页面代码&lt;/h3&gt;&lt;figure class=&quot;highlight dust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;$&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;template-variable&quot;&gt;&amp;#123;pageContext.request.contextPaht&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&lt;span class=&quot;string&quot;&gt;/commom/getQRImage.htm?code_url=$&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;template-variable&quot;&gt;&amp;#123;code_url&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;width:300px;height:300px;&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h3 id=&quot;控制器代码&quot;&gt;&lt;a href=&quot;#控制器代码&quot; class=&quot;headerlink&quot; title=&quot;控制器代码&quot;&gt;&lt;/a&gt;控制器代码&lt;/h3&gt;&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   * 生成二维码图片并直接以流的形式输出到页面&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   * @param code_url&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   * @param response&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;variable&quot;&gt;@RequestMapping&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;/commom/getQRImage&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;variable&quot;&gt;@ResponseBody&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  public void getQRCode(String code_url,HttpServletResponse response)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    QRGenerator&lt;span class=&quot;selector-class&quot;&gt;.generateToOutputStream&lt;/span&gt;(code_url,response.getOutputStream());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h2 id=&quot;小结&quot;&gt;&lt;a href=&quot;#小结&quot; class=&quot;headerlink&quot; title=&quot;小结&quot;&gt;&lt;/a&gt;小结&lt;/h2&gt;&lt;p&gt;此次只是微信支付的其中一种，未来可能还来补充其他的支付方式。&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;微信扫码支付简介&quot;&gt;&lt;a href=&quot;#微信扫码支付简介&quot; class=&quot;headerlink&quot; title=&quot;微信扫码支付简介&quot;&gt;&lt;/a&gt;微信扫码支付简介&lt;/h2&gt;&lt;p&gt;最近项目中要接入微信支付，从&lt;a href=&quot;https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=6_1&quot;&gt;官方文档&lt;/a&gt; 上了解了下微信支付的场景及方式，由此总结了下开发需要做的事情。&lt;br&gt;微信扫码支付，简单的来说，就是你把微信支付需要的信息，生成到二维码图片中。通过微信扫一扫，发起支付。我们需要做的就是：一是：按照微信扫码支付规则生成二维码信息 二是：微信没有提供生成二维码图片的接口。需要我们自己把二维码信息生成到二维码图片中。&lt;/p&gt;
    
    </summary>
    
      <category term="微信支付" scheme="http://www.cobala.cn/categories/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/"/>
    
    
      <category term="微信扫码支付" scheme="http://www.cobala.cn/tags/%E5%BE%AE%E4%BF%A1%E6%89%AB%E7%A0%81%E6%94%AF%E4%BB%98/"/>
    
  </entry>
  
  <entry>
    <title>初次相遇</title>
    <link href="http://www.cobala.cn/2016/05/07/%E5%88%9D%E6%AC%A1%E7%9B%B8%E9%81%87/"/>
    <id>http://www.cobala.cn/2016/05/07/初次相遇/</id>
    <published>2016-05-07T05:42:34.000Z</published>
    <updated>2016-05-24T11:07:29.027Z</updated>
    
    <content type="html">&lt;p&gt;这是第一次去长城玩时拍的，那个时候的心情依然记得清清楚楚，嘿嘿，外表文静，沉默寡言的。。。&lt;br&gt;&lt;img src=&quot;http://o6skwsce0.bkt.clouddn.com/psb.jpg&quot; alt=&quot;她&quot;&gt;&lt;br&gt;其实，刚开始我是偷拍的，哈哈哈，她肯定没有发现&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;这是第一次去长城玩时拍的，那个时候的心情依然记得清清楚楚，嘿嘿，外表文静，沉默寡言的。。。&lt;br&gt;&lt;img src=&quot;http://o6skwsce0.bkt.clouddn.com/psb.jpg&quot; alt=&quot;她&quot;&gt;&lt;br&gt;其实，刚开始我是偷拍的，哈哈哈，她肯定没有发现&lt;
    
    </summary>
    
      <category term="生活" scheme="http://www.cobala.cn/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>数据结构概率</title>
    <link href="http://www.cobala.cn/2015/11/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%A6%82%E7%8E%87/"/>
    <id>http://www.cobala.cn/2015/11/21/数据结构概率/</id>
    <published>2015-11-21T15:33:37.000Z</published>
    <updated>2016-05-24T11:07:29.026Z</updated>
    
    <content type="html">&lt;h3 id=&quot;算法-数据结构-程序&quot;&gt;&lt;a href=&quot;#算法-数据结构-程序&quot; class=&quot;headerlink&quot; title=&quot;算法+数据结构=程序&quot;&gt;&lt;/a&gt;算法+数据结构=程序&lt;/h3&gt;&lt;h3 id=&quot;基本概念和常用术语&quot;&gt;&lt;a href=&quot;#基本概念和常用术语&quot; class=&quot;headerlink&quot; title=&quot;基本概念和常用术语&quot;&gt;&lt;/a&gt;基本概念和常用术语&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;&lt;strong&gt;数据(data)&lt;/strong&gt;是描述客观事物的数、字符以及能输入计算机中并被计算机处理的符号的集合。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;数据元素(data element)&lt;/strong&gt;是数据的基本单位。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;数据对象(data object)&lt;/strong&gt;是具有相同性质的数据元素的集合，是数据的一个子集。比如，大写字母数据对象就是集合{‘A’,’B’,…’Z’}.&lt;/li&gt; &lt;/ol&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;h3 id=&quot;数据结构包含的内容&quot;&gt;&lt;a href=&quot;#数据结构包含的内容&quot; class=&quot;headerlink&quot; title=&quot;数据结构包含的内容&quot;&gt;&lt;/a&gt;数据结构包含的内容&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;数据结构&lt;/strong&gt;是带有结构的数据元素的集合。结构指的是数据元素之间的相互关键，即数据的组织形式，结构中的数据元素称为结点。&lt;/p&gt; &lt;ol&gt; &lt;li&gt;数据元素之间的逻辑(或抽象)关系，也称为数据的逻辑&lt;blockquote&gt; &lt;ul&gt; &lt;li&gt;线行数据结构的特征是：数据袁术(结点)之间存在着一对一的关系，并且结构中仅有一个开始结点和一个终端结点，其余结点都是仅有一个直接前趋和一个直接后继.&lt;/li&gt; &lt;li&gt;非线性数据结构的特点是：数据元素之间存在着一对多或多对多的关系，即一个结点可能有多个直接前趋和多个直接后继。该结构包括树形结构、图形结构和网状结构等&lt;/li&gt; &lt;/ul&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt;数据元素及其关系在计算机内的存储方式，称为数据的存储接口(物理结构)&lt;blockquote&gt; &lt;ul&gt; &lt;li&gt;顺序存储方法&lt;/li&gt; &lt;li&gt;链接存储方法&lt;/li&gt; &lt;li&gt;索引存储方法&lt;/li&gt; &lt;li&gt;散列存储方法&lt;br&gt;数据结构的逻辑结构、存储结构及运算这三方面看错一个整体&lt;/li&gt; &lt;/ul&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt;数据的运算，即对数据元素施加的操作(行为)&lt;blockquote&gt; &lt;ul&gt; &lt;li&gt;检索&lt;/li&gt; &lt;li&gt;插入&lt;/li&gt; &lt;li&gt;删除&lt;/li&gt; &lt;li&gt;更新&lt;/li&gt; &lt;li&gt;排序&lt;/li&gt; &lt;/ul&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;算法的描述&quot;&gt;&lt;a href=&quot;#算法的描述&quot; class=&quot;headerlink&quot; title=&quot;算法的描述&quot;&gt;&lt;/a&gt;算法的描述&lt;/h3&gt;&lt;p&gt;算法是对问题求解步骤的一种描述。通俗地说，一个算法就是一种解题的方法。严格地说，算法是由若干条指令组成的有穷序列，其中每条指令表示一个或多个操作。&lt;/p&gt; &lt;ol&gt; &lt;li&gt;输入&lt;/li&gt; &lt;li&gt;输出&lt;/li&gt; &lt;li&gt;有穷性&lt;/li&gt; &lt;li&gt;确定性&lt;/li&gt; &lt;li&gt;可行性&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;算法分析&quot;&gt;&lt;a href=&quot;#算法分析&quot; class=&quot;headerlink&quot; title=&quot;算法分析&quot;&gt;&lt;/a&gt;算法分析&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;执行算法所耗费的时间，即时间复杂度&lt;/li&gt; &lt;li&gt;执行算法所耗费的存储空间，主要是辅助空间，即空间复杂性&lt;/li&gt; &lt;li&gt;算法应易于理解，易于编程，易于调试等，即可读性和可操作性&lt;/li&gt; &lt;/ol&gt; &lt;ol&gt; &lt;li&gt;算法时间复杂度大O表示法&lt;blockquote&gt; &lt;p&gt;按数量级递增排序，依次为：常数阶O(1)、对数阶O(log2n)、线性阶O(n)、线性对数阶O(nlog2n)、平方阶O(n2)、立方阶O(n3)、…k次方阶O(nk)、指数阶O(2n)和阶乘阶O(n!)&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;li&gt;算法空间复制度S(n)&lt;blockquote&gt; &lt;p&gt;算法空寂复杂度S(n)定义为该算法所耗费的存储空间，它是对一个算法在运行过程中临时占用空间大小的度量，是问题规模n的函数.一个算法在计算机存储器上所占用的存储空间，包括存储算法本身占用的存储空间、算法的输入输出数据所占用的存储空间和算法在运行过程中临时占用存储空间这三个方面&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;Link&quot;&gt;&lt;a href=&quot;#Link&quot; class=&quot;headerlink&quot; title=&quot;Link&quot;&gt;&lt;/a&gt;Link&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E7%AE%97%E6%B3%95&quot; title=&quot;维基百科算法&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;维基百科算法&lt;/a&gt;&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;算法-数据结构-程序&quot;&gt;&lt;a href=&quot;#算法-数据结构-程序&quot; class=&quot;headerlink&quot; title=&quot;算法+数据结构=程序&quot;&gt;&lt;/a&gt;算法+数据结构=程序&lt;/h3&gt;&lt;h3 id=&quot;基本概念和常用术语&quot;&gt;&lt;a href=&quot;#基本概念和常用术语&quot; class=&quot;headerlink&quot; title=&quot;基本概念和常用术语&quot;&gt;&lt;/a&gt;基本概念和常用术语&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;&lt;strong&gt;数据(data)&lt;/strong&gt;是描述客观事物的数、字符以及能输入计算机中并被计算机处理的符号的集合。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;数据元素(data element)&lt;/strong&gt;是数据的基本单位。&lt;/li&gt; &lt;li&gt;&lt;strong&gt;数据对象(data object)&lt;/strong&gt;是具有相同性质的数据元素的集合，是数据的一个子集。比如，大写字母数据对象就是集合{‘A’,’B’,…’Z’}.&lt;/li&gt; &lt;/ol&gt;
    
    </summary>
    
      <category term="数据结构" scheme="http://www.cobala.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="读书笔记" scheme="http://www.cobala.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="数据结构" scheme="http://www.cobala.cn/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="读书笔记" scheme="http://www.cobala.cn/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Nodejs http-server 配置</title>
    <link href="http://www.cobala.cn/2015/11/21/Nodejshttp-server%E9%85%8D%E7%BD%AE/"/>
    <id>http://www.cobala.cn/2015/11/21/Nodejshttp-server配置/</id>
    <published>2015-11-21T08:05:49.000Z</published>
    <updated>2016-05-24T11:07:29.022Z</updated>
    
    <content type="html">&lt;ol&gt; &lt;li&gt;&lt;a href=&quot;https://nodejs.org/en/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载Nodejs&lt;/a&gt;&lt;/li&gt; &lt;li&gt;按照http-server 组件 打开cmd命令行 执行命令 &lt;code&gt;npm install http-server -g&lt;/code&gt;&lt;/li&gt; &lt;li&gt;在eclipse中导入svn项目static&lt;/li&gt; &lt;li&gt;&lt;p&gt;将下面内容保存成nodejs_http-server.bat 文件&lt;/p&gt; &lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;http-server&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;E&lt;/span&gt;:\&lt;span class=&quot;selector-tag&quot;&gt;EWorkSpace&lt;/span&gt;\&lt;span class=&quot;selector-tag&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.resource&lt;/span&gt;\&lt;span class=&quot;selector-tag&quot;&gt;static&lt;/span&gt;\&lt;span class=&quot;selector-tag&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;-a&lt;/span&gt; 192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.128&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;-p&lt;/span&gt; 8181&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;/li&gt; &lt;li&gt;&lt;p&gt;配置nodejs_http-server.bat 文件执行信息&lt;br&gt;&lt;code&gt;http-server [部署root目录] -a [ip地址] -p [端口]&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;详情参考 &lt;a href=&quot;https://www.npmjs.com/package/http-server&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http-server&lt;/a&gt;&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;ol&gt; &lt;li&gt;&lt;a href=&quot;https://nodejs.org/en/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载Nodejs&lt;/a&gt;&lt;/li&gt; &lt;li&gt;按照http-server 组件 打开cmd命令行 执行命令 &lt;code&gt;npm inst
    
    </summary>
    
      <category term="Nodejs" scheme="http://www.cobala.cn/categories/Nodejs/"/>
    
    
      <category term="Nodejs" scheme="http://www.cobala.cn/tags/Nodejs/"/>
    
  </entry>
  
  <entry>
    <title>JS插件模板</title>
    <link href="http://www.cobala.cn/2015/11/21/JS%E6%8F%92%E4%BB%B6%E6%A8%A1%E6%9D%BF/"/>
    <id>http://www.cobala.cn/2015/11/21/JS插件模板/</id>
    <published>2015-11-21T08:03:35.000Z</published>
    <updated>2016-05-24T11:07:29.021Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;window&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PageReleaseManage&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PageReleaseManage.attrNames = &amp;#123;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PageReleaseManage.staticFields = &amp;#123;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PageReleaseManage.staticMethod = &amp;#123;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//default editor options&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PageReleaseManage.options = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			debug:&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,			&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;comment&quot;&gt;//回调TODO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			callBackEvent : &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PageReleaseManage.prototype = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;comment&quot;&gt;//constructor&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt; : PageReleaseManage,		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			//set options&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			init : function(options)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				PageReleaseManage.options = $.extend(PageReleaseManage.options, options);				&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;comment&quot;&gt;//reload&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			reload:&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.location.reload();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PageReleaseManage.fn = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;comment&quot;&gt;//处理图片上传后的操作&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			uploadImageHandle : &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;$element, data&lt;/span&gt;)&lt;/span&gt;&amp;#123;											&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.pageReleaseManage = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; PageReleaseManage();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)( );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//初始化綁定操作&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;window&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	$(&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;).ready(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//TODO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)(&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span 
    
    </summary>
    
      <category term="javascript" scheme="http://www.cobala.cn/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://www.cobala.cn/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>Ajax请求Session过期问题处理</title>
    <link href="http://www.cobala.cn/2015/11/21/ajax%E8%AF%B7%E6%B1%82Session%E8%BF%87%E6%9C%9F%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86/"/>
    <id>http://www.cobala.cn/2015/11/21/ajax请求Session过期问题处理/</id>
    <published>2015-11-21T07:59:43.000Z</published>
    <updated>2016-05-24T11:07:29.023Z</updated>
    
    <content type="html">&lt;p&gt;当前解决方案重写jquery的$.ajax方法中的success、error、complete方法&lt;br&gt;当返回内容是501的时候 直接当前页面 跳转登录页面&lt;/p&gt; &lt;p&gt;如果需要自己处理ajax方法&lt;br&gt;在ajax中添加参数overrideDefault:true&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150924/ajax.png&quot; alt=&quot;ajax&quot;&gt;&lt;/p&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ajax 处理全局异常和session过期问题&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; _overrideAjax = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;overrideJQeuryAjax&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!_overrideAjax)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; oriAjax = $.ajax;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// Override jquery ajax to check if session is valid.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	$.ajax = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;options&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; dataType = options.dataType;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; overrideDefault=options.overrideDefault;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt;(overrideDefault)==&lt;span class=&quot;string&quot;&gt;&#39;undefined&#39;&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			overrideDefault=&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; callback = options[&lt;span class=&quot;string&quot;&gt;&quot;callback&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; oriSuccess = options[&lt;span class=&quot;string&quot;&gt;&quot;success&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ($.isFunction(oriSuccess)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			options[&lt;span class=&quot;string&quot;&gt;&quot;success&quot;&lt;/span&gt;] = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;result&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!overrideDefault &amp;amp;&amp;amp; !_checkSessionTimeout(result, dataType)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					&lt;span class=&quot;comment&quot;&gt;//ajax session过期刷新当前页面&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.location.href=&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.location.href;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				oriSuccess(result);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; oriComplete = options[&lt;span class=&quot;string&quot;&gt;&quot;complete&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ($.isFunction(oriComplete)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			options[&lt;span class=&quot;string&quot;&gt;&quot;complete&quot;&lt;/span&gt;] = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;xmlHttpRequest, textStatus&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; result = xmlHttpRequest.responseText;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!overrideDefault &amp;amp;&amp;amp; !_checkSessionTimeout(result, dataType)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.location.href=&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.location.href;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				oriComplete(xmlHttpRequest, textStatus);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//if error function is undefined, set default logic&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; orierror = options[&lt;span class=&quot;string&quot;&gt;&quot;error&quot;&lt;/span&gt;];		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!$.isFunction(orierror)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			options[&lt;span class=&quot;string&quot;&gt;&quot;error&quot;&lt;/span&gt;] = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;err&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;comment&quot;&gt;//alert(&quot;ERROR: &quot;+err.status+&quot; &quot;+err.statusText);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				newCommon.lert(&lt;span class=&quot;string&quot;&gt;&quot;alway&quot;&lt;/span&gt;,&amp;#123;title:&lt;span class=&quot;string&quot;&gt;&quot;温馨提示&quot;&lt;/span&gt;,del:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,content:&lt;span class=&quot;string&quot;&gt;&#39;系统繁忙，请稍后重试&#39;&lt;/span&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;comment&quot;&gt;//return false;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		oriAjax(options);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;_checkSessionTimeout&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;result,dataType&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; flag = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt;(result)!=&lt;span class=&quot;string&quot;&gt;&#39;undefined&#39;&lt;/span&gt; &amp;amp;&amp;amp; result==&lt;span class=&quot;number&quot;&gt;501&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		flag = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; flag;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;当前解决方案重写jquery的$.ajax方法中的success、error、complete方法&lt;br&gt;当返回内容是501的时候 直接当前页面 跳转登录页面&lt;/p&gt; &lt;p&gt;如果需要自己处理ajax方法&lt;br&gt;在ajax中添加参数overrideDefault:true&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150924/ajax.png&quot; alt=&quot;ajax&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Session" scheme="http://www.cobala.cn/categories/Session/"/>
    
    
      <category term="Session" scheme="http://www.cobala.cn/tags/Session/"/>
    
      <category term="jQuery" scheme="http://www.cobala.cn/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>Piwik</title>
    <link href="http://www.cobala.cn/2015/11/21/piwik/"/>
    <id>http://www.cobala.cn/2015/11/21/piwik/</id>
    <published>2015-11-21T07:54:31.000Z</published>
    <updated>2016-05-24T11:07:29.025Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Piwik简介-Piwik-Doc&quot;&gt;&lt;a href=&quot;#Piwik简介-Piwik-Doc&quot; class=&quot;headerlink&quot; title=&quot;Piwik简介 Piwik Doc&quot;&gt;&lt;/a&gt;Piwik简介 &lt;a href=&quot;http://piwik.org/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Piwik Doc&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;Piwik 是一套基于 Php+MySQL 技术构建，能够与 Google Analytics 相媲美的开源网站访问统计系统。Piwik 可以给你详细的统计信息，比如网页浏览人数, 访问最多的页面, 搜索引擎关键词等等，并且采用了大量的AJAX/Flash技术，使得在操作上更加便易。&lt;/li&gt; &lt;li&gt;Piwik 可以安装在你的服务器上面，数据就保存在你自己的服务器上 面。你可以非常容易的插入统计图表到你的博客或是网站后台的控制面板中。安装完成后，你只需将一小段代码放到将要统计的网页中即可。&lt;/li&gt; &lt;li&gt;此外，它还采用了插件扩展及开放API架构，拥有众多不同功能的插件，也可以让开发人员根据自已的实际需求创建更多的功能。&lt;/li&gt; &lt;/ol&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;h2 id=&quot;Piwik-安装&quot;&gt;&lt;a href=&quot;#Piwik-安装&quot; class=&quot;headerlink&quot; title=&quot;Piwik 安装&quot;&gt;&lt;/a&gt;Piwik 安装&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;PHP + Apache 配置安装 &lt;a href=&quot;http://www.cnblogs.com/homezzm/archive/2012/08/01/2618062.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Window下配置PHP环境&lt;/a&gt;&lt;/li&gt; &lt;li&gt;直接下载PHP集成安装环境 &lt;a href=&quot;http://www.oschina.net/p/wampserver&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wampserver&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;code&gt;如果是电子商务网站可以开启电子商务网站分析配置&lt;/code&gt;&lt;/p&gt; &lt;h2 id=&quot;通过js追踪-tracking-javascript-guide&quot;&gt;&lt;a href=&quot;#通过js追踪-tracking-javascript-guide&quot; class=&quot;headerlink&quot; title=&quot;通过js追踪 tracking-javascript-guide&quot;&gt;&lt;/a&gt;通过js追踪 &lt;a href=&quot;http://developer.piwik.org/guides/tracking-javascript-guide&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;tracking-javascript-guide&lt;/a&gt;&lt;/h2&gt;&lt;h3 id=&quot;通用代码&quot;&gt;&lt;a href=&quot;#通用代码&quot; class=&quot;headerlink&quot; title=&quot;通用代码&quot;&gt;&lt;/a&gt;通用代码&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Piwik --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;javascript&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; _paq = _paq || [];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  _paq.push([&lt;span class=&quot;string&quot;&gt;&#39;trackPageView&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  _paq.push([&lt;span class=&quot;string&quot;&gt;&#39;enableLinkTracking&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  (&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; u=&lt;span class=&quot;string&quot;&gt;&quot;//piwik.maxtp.cn/&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _paq.push([&lt;span class=&quot;string&quot;&gt;&#39;setTrackerUrl&#39;&lt;/span&gt;, u+&lt;span class=&quot;string&quot;&gt;&#39;piwik.php&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _paq.push([&lt;span class=&quot;string&quot;&gt;&#39;setSiteId&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; d=&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;, g=d.createElement(&lt;span class=&quot;string&quot;&gt;&#39;script&#39;&lt;/span&gt;), s=d.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;script&#39;&lt;/span&gt;)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    g.type=&lt;span class=&quot;string&quot;&gt;&#39;text/javascript&#39;&lt;/span&gt;; g.async=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;; g.defer=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;; g.src=u+&lt;span class=&quot;string&quot;&gt;&#39;piwik.js&#39;&lt;/span&gt;; s.parentNode.insertBefore(g,s);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;)();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;noscript&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;//piwik.maxtp.cn/piwik.php?idsite=1&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;border:0;&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;alt&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;noscript&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- End Piwik Code --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h3 id=&quot;改变文档标题&quot;&gt;&lt;a href=&quot;#改变文档标题&quot; class=&quot;headerlink&quot; title=&quot;改变文档标题&quot;&gt;&lt;/a&gt;改变文档标题&lt;/h3&gt;&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setDocumentTitle&#39;&lt;/span&gt;, document.domain + &lt;span class=&quot;string&quot;&gt;&quot;/&quot;&lt;/span&gt; + document.title]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;trackPageView&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h3 id=&quot;事件点击&quot;&gt;&lt;a href=&quot;#事件点击&quot; class=&quot;headerlink&quot; title=&quot;事件点击&quot;&gt;&lt;/a&gt;事件点击&lt;/h3&gt;&lt;p&gt;&lt;code&gt;trackEvent(category, action, [name], [value])&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_paq.push([&lt;span class=&quot;string&quot;&gt;&#39;trackEvent&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Documentary&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Rating&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Thrive&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;9.5&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;#&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;javascript:_paq.push([&#39;trackEvent&#39;, &#39;Menu&#39;, &#39;Freedom&#39;]);&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Freedom page&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;h3 id=&quot;电子商务-ecommerce-analytics&quot;&gt;&lt;a href=&quot;#电子商务-ecommerce-analytics&quot; class=&quot;headerlink&quot; title=&quot;电子商务 ecommerce-analytics&quot;&gt;&lt;/a&gt;电子商务 &lt;a href=&quot;http://piwik.org/docs/ecommerce-analytics/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ecommerce-analytics&lt;/a&gt;&lt;/h3&gt;&lt;h4 id=&quot;产品-类别访问&quot;&gt;&lt;a href=&quot;#产品-类别访问&quot; class=&quot;headerlink&quot; title=&quot;产品/类别访问&quot;&gt;&lt;/a&gt;产品/类别访问&lt;/h4&gt;&lt;p&gt;&lt;code&gt;setEcommerceView( productSKU, productName, categoryName, price )&lt;/code&gt;&lt;br&gt;产品&lt;br&gt;&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-attr&quot;&gt;[...]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// all parameters are optional, but we recommend to set at minimum productSKU and productName&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;_paq&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setEcommerceView&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;9780786706211&quot;&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;// (required) SKU: Product unique identifier&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;Endurance: Shackleton&#39;s Incredible Voyage&quot;&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;// (optional) Product name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;Adventure Books&quot;&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;// (optional) Product category, or array of up to 5 categories&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;20.11&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;// (optional) Product Price as displayed on the page&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;trackPageView&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-attr&quot;&gt;[...]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;类别&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[...]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// on a category page, productSKU and productName are not applicable and are &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq.push([&lt;span class=&quot;string&quot;&gt;&#39;setEcommerceView&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;productSku = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, // &lt;span class=&quot;keyword&quot;&gt;No&lt;/span&gt; product &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Category&lt;/span&gt; page&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;productName = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, // &lt;span class=&quot;keyword&quot;&gt;No&lt;/span&gt; product &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Category&lt;/span&gt; page&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;category&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;Adventure Books&quot;&lt;/span&gt; // &lt;span class=&quot;keyword&quot;&gt;Category&lt;/span&gt; Page, &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; up &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; categories&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq.push([&#39;trackPageView&#39;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[...]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;h4 id=&quot;订单&quot;&gt;&lt;a href=&quot;#订单&quot; class=&quot;headerlink&quot; title=&quot;订单&quot;&gt;&lt;/a&gt;订单&lt;/h4&gt;&lt;p&gt;&lt;code&gt;addEcommerceItem(productSKU, productName, productCategory, price, quantity)&lt;/code&gt;&lt;br&gt;如果订单有多个产品需要循环调用&lt;br&gt;&lt;code&gt;trackEcommerceOrder(orderId, grandTotal, subTotal, tax, shipping, discount)&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight scheme&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;name&quot;&gt;&lt;span class=&quot;builtin-name&quot;&gt;...&lt;/span&gt;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// add the first product to the order&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq.push([&lt;span class=&quot;symbol&quot;&gt;&#39;addEcommerceItem&lt;/span&gt;&#39;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;9780786706211&quot;&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;required&lt;/span&gt;) SKU: Product unique identifier&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;Endurance: Shackleton&#39;s Incredible Voyage&quot;&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;optional&lt;/span&gt;) Product name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;Adventure Books&quot;&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;optional&lt;/span&gt;) Product category. You can also specify an array of up to &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; categories eg. [&lt;span class=&quot;string&quot;&gt;&quot;Books&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;New releases&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;Biography&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;8.8&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;recommended&lt;/span&gt;) Product price&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; // (&lt;span class=&quot;name&quot;&gt;optional&lt;/span&gt;, default to &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) Product quantity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;])&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// Here you can add other products in the order&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;name&quot;&gt;&lt;span class=&quot;builtin-name&quot;&gt;...&lt;/span&gt;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// Specifiy the order details to Piwik server &amp;amp;amp&lt;span class=&quot;comment&quot;&gt;; sends the data to Piwik server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq.push([&lt;span class=&quot;symbol&quot;&gt;&#39;trackEcommerceOrder&lt;/span&gt;&#39;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;A10000123&quot;&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;required&lt;/span&gt;) Unique Order ID&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;required&lt;/span&gt;) Order Revenue grand total (&lt;span class=&quot;name&quot;&gt;includes&lt;/span&gt; tax, shipping, and subtracted discount)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;optional&lt;/span&gt;) Order sub total (&lt;span class=&quot;name&quot;&gt;excludes&lt;/span&gt; shipping)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;5.5&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;optional&lt;/span&gt;) Tax amount&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4.5&lt;/span&gt;, // (&lt;span class=&quot;name&quot;&gt;optional&lt;/span&gt;) Shipping amount&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;false // (&lt;span class=&quot;name&quot;&gt;optional&lt;/span&gt;) Discount offered (&lt;span class=&quot;name&quot;&gt;set&lt;/span&gt; to false for unspecified parameter)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;])&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// we recommend to leave the call to trackPageView() on the Order confirmation page&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq.push([&lt;span class=&quot;symbol&quot;&gt;&#39;trackPageView&lt;/span&gt;&#39;])&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;name&quot;&gt;&lt;span class=&quot;builtin-name&quot;&gt;...&lt;/span&gt;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;h4 id=&quot;购物车&quot;&gt;&lt;a href=&quot;#购物车&quot; class=&quot;headerlink&quot; title=&quot;购物车&quot;&gt;&lt;/a&gt;购物车&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;TODO
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;站内搜索&quot;&gt;&lt;a href=&quot;#站内搜索&quot; class=&quot;headerlink&quot; title=&quot;站内搜索&quot;&gt;&lt;/a&gt;站内搜索&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;TODO
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;自定义变量-custom-variables&quot;&gt;&lt;a href=&quot;#自定义变量-custom-variables&quot; class=&quot;headerlink&quot; title=&quot;自定义变量 custom-variables&quot;&gt;&lt;/a&gt;自定义变量 &lt;a href=&quot;http://piwik.org/docs/custom-variables/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;custom-variables&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;setCustomVariable(index, name, value, scope = &amp;quot;visit&amp;quot;)&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight vhdl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_paq.push([&lt;span class=&quot;symbol&quot;&gt;&#39;setCustomVariable&lt;/span&gt;&#39;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Index, the number from &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; where this custom &lt;span class=&quot;keyword&quot;&gt;variable&lt;/span&gt; name &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; stored&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Name, the name &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; the &lt;span class=&quot;keyword&quot;&gt;variable&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; example: Gender, VisitorType&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;Gender&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Value, &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; example: &lt;span class=&quot;string&quot;&gt;&quot;Male&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;Female&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;new&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;engaged&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;customer&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;Male&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Scope &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; the custom &lt;span class=&quot;keyword&quot;&gt;variable&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;visit&quot;&lt;/span&gt; means the custom &lt;span class=&quot;keyword&quot;&gt;variable&lt;/span&gt; applies &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; the current visit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;visit&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq.push([&lt;span class=&quot;symbol&quot;&gt;&#39;trackPageView&lt;/span&gt;&#39;]);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;&lt;code&gt;setCustomVariable(index, name, value, scope = &amp;quot;page&amp;quot;)&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Track 2 custom variables with the same name, but in different slots.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// You will then access the statistics about your articles&#39; categories in the &#39;Visitors &amp;amp;gt; custom variables&#39; report&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setCustomVariable&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Category&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Sports&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;page&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Track the same name but in a different Index&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setCustomVariable&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Category&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Europe&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;page&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Here you could track other custom variables with scope &quot;page&quot; in Index 3, 4 or 5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// The order is important: first setCustomVariable is called and then trackPageView records the request&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;trackPageView&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;h3 id=&quot;设置UserID&quot;&gt;&lt;a href=&quot;#设置UserID&quot; class=&quot;headerlink&quot; title=&quot;设置UserID&quot;&gt;&lt;/a&gt;设置UserID&lt;/h3&gt;&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setUserId&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;USER_ID_HERE&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;trackPageView&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h3 id=&quot;设置Cookie&quot;&gt;&lt;a href=&quot;#设置Cookie&quot; class=&quot;headerlink&quot; title=&quot;设置Cookie&quot;&gt;&lt;/a&gt;设置Cookie&lt;/h3&gt;&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setSiteId&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setTrackerUrl&#39;&lt;/span&gt;, u+&lt;span class=&quot;string&quot;&gt;&#39;piwik.php&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Same cookie as: example.com, www.example.com, subdomain.example.com, ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setCookieDomain&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;*.example.com&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;setDomains&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;*.example.com&#39;&lt;/span&gt;]); &lt;span class=&quot;comment&quot;&gt;// Download &amp;amp; Click tracking alias domains&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_paq&lt;span class=&quot;selector-class&quot;&gt;.push&lt;/span&gt;([&lt;span class=&quot;string&quot;&gt;&#39;trackPageView&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;p&gt;可以用于统计 某个品牌下产品的浏览数&lt;/p&gt; &lt;h3 id=&quot;Download-amp-Outlink-tracking&quot;&gt;&lt;a href=&quot;#Download-amp-Outlink-tracking&quot; class=&quot;headerlink&quot; title=&quot;Download &amp;amp; Outlink tracking&quot;&gt;&lt;/a&gt;Download &amp;amp; Outlink tracking&lt;/h3&gt;&lt;p&gt;&lt;code&gt;TODO&lt;/code&gt;&lt;/p&gt; &lt;h2 id=&quot;通过Http-call-追踪&quot;&gt;&lt;a href=&quot;#通过Http-call-追踪&quot; class=&quot;headerlink&quot; title=&quot;通过Http call 追踪&quot;&gt;&lt;/a&gt;通过Http call 追踪&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://developer.piwik.org/guides/tracking-api-clients&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://developer.piwik.org/guides/tracking-api-clients&lt;/a&gt;&lt;/p&gt; &lt;p&gt;可以使用其他语言调用api添加对应的统计信息&lt;br&gt;java &lt;a href=&quot;https://github.com/piwik/piwik-java-tracker&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/piwik/piwik-java-tracker&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;通过log追踪&quot;&gt;&lt;a href=&quot;#通过log追踪&quot; class=&quot;headerlink&quot; title=&quot;通过log追踪&quot;&gt;&lt;/a&gt;通过log追踪&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://piwik.org/log-analytics/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://piwik.org/log-analytics/&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;Report&quot;&gt;&lt;a href=&quot;#Report&quot; class=&quot;headerlink&quot; title=&quot;Report&quot;&gt;&lt;/a&gt;Report&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;导出对应的图片&lt;/li&gt; &lt;li&gt;通过后台导出对应格式的数据 获得APIURL&lt;br&gt;&lt;a href=&quot;http://developer.piwik.org/guides/querying-the-reporting-api&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://developer.piwik.org/guides/querying-the-reporting-api&lt;/a&gt;&lt;/li&gt; &lt;li&gt;直接生成对应的html代码 iframe&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;其他&quot;&gt;&lt;a href=&quot;#其他&quot; class=&quot;headerlink&quot; title=&quot;其他&quot;&gt;&lt;/a&gt;其他&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;中国地图信息及城市坐标问题&lt;/li&gt; &lt;li&gt;性能优化&lt;/li&gt; &lt;li&gt;个性插件&lt;/li&gt; &lt;li&gt;数据量的时候需要关闭实时统计需要根据定时器统计&lt;/li&gt; &lt;li&gt;官方名词解释&lt;br&gt;&lt;a href=&quot;http://glossary.piwik.org/?language=zh-cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://glossary.piwik.org/?language=zh-cn&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;Link&quot;&gt;&lt;a href=&quot;#Link&quot; class=&quot;headerlink&quot; title=&quot;Link&quot;&gt;&lt;/a&gt;Link&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://piwik.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://piwik.org/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://developer.piwik.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://developer.piwik.org/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://piwik.org/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://piwik.org/docs/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://demo.piwik.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://demo.piwik.org/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.piwik.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.piwik.cn/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://wenku.baidu.com/link?url=bE-zyTZZPsDKvMGCyi4pj7fUDuoROFdEkO50y4XQ7RVjVMAzWAC9IolfoU3g9fumHPv4gOMF5yG8E6C-oqHyWR4mHrsgCn0K7831iWarwSG&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度文库&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.docin.com/p-495978882.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;优化设置&lt;/a&gt;&lt;/p&gt; &lt;h2 id=&quot;GitHub&quot;&gt;&lt;a href=&quot;#GitHub&quot; class=&quot;headerlink&quot; title=&quot;GitHub&quot;&gt;&lt;/a&gt;GitHub&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/dzhai/piwik_demo&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;piwik_demo&lt;/a&gt;&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Piwik简介-Piwik-Doc&quot;&gt;&lt;a href=&quot;#Piwik简介-Piwik-Doc&quot; class=&quot;headerlink&quot; title=&quot;Piwik简介 Piwik Doc&quot;&gt;&lt;/a&gt;Piwik简介 &lt;a href=&quot;http://piwik.org/docs/&quot;&gt;Piwik Doc&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;Piwik 是一套基于 Php+MySQL 技术构建，能够与 Google Analytics 相媲美的开源网站访问统计系统。Piwik 可以给你详细的统计信息，比如网页浏览人数, 访问最多的页面, 搜索引擎关键词等等，并且采用了大量的AJAX/Flash技术，使得在操作上更加便易。&lt;/li&gt; &lt;li&gt;Piwik 可以安装在你的服务器上面，数据就保存在你自己的服务器上 面。你可以非常容易的插入统计图表到你的博客或是网站后台的控制面板中。安装完成后，你只需将一小段代码放到将要统计的网页中即可。&lt;/li&gt; &lt;li&gt;此外，它还采用了插件扩展及开放API架构，拥有众多不同功能的插件，也可以让开发人员根据自已的实际需求创建更多的功能。&lt;/li&gt; &lt;/ol&gt;
    
    </summary>
    
      <category term="系统日志分析" scheme="http://www.cobala.cn/categories/%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"/>
    
    
      <category term="Piwik" scheme="http://www.cobala.cn/tags/Piwik/"/>
    
      <category term="系统日志分析" scheme="http://www.cobala.cn/tags/%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>大型网站架构演化</title>
    <link href="http://www.cobala.cn/2015/08/08/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E6%BC%94%E5%8C%96/"/>
    <id>http://www.cobala.cn/2015/08/08/大型网站架构演化/</id>
    <published>2015-08-08T02:08:34.000Z</published>
    <updated>2016-05-24T11:07:29.020Z</updated>
    
    <content type="html">&lt;h2 id=&quot;大型网站系统软件的特点&quot;&gt;&lt;a href=&quot;#大型网站系统软件的特点&quot; class=&quot;headerlink&quot; title=&quot;大型网站系统软件的特点&quot;&gt;&lt;/a&gt;大型网站系统软件的特点&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;高并发，大流量 &lt;/li&gt; &lt;li&gt;高可用&lt;/li&gt; &lt;li&gt;海量数据&lt;/li&gt; &lt;li&gt;用户分布广泛，网络情况复杂&lt;/li&gt; &lt;li&gt;安全环境恶劣&lt;/li&gt; &lt;li&gt;需求快速变更，发布频繁&lt;/li&gt; &lt;li&gt;渐进式发展&lt;/li&gt; &lt;/ol&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;h2 id=&quot;大型网站演化发展历程&quot;&gt;&lt;a href=&quot;#大型网站演化发展历程&quot; class=&quot;headerlink&quot; title=&quot;大型网站演化发展历程&quot;&gt;&lt;/a&gt;大型网站演化发展历程&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;1. 初始阶段的网站架构&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/01.png&quot; alt=&quot;&quot;&gt;&lt;br&gt; 应用程序、数据库、文件等所有的资源都在一台服务器上。&lt;br&gt;&lt;strong&gt;2. 应用服务器和数据库分离&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/02.png&quot; alt=&quot;&quot;&gt;&lt;br&gt; 应用程序、数据库和文件分别部署在不同的服务器上&lt;br&gt;&lt;strong&gt;3. 使用缓存改善网站性能&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/03.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;网站访问遵循二八定律：80%的业务访问集中在20%的数据上&lt;br&gt;网站使用的缓存可以分为两种：缓存在应用服务器上的本地缓存和缓存在专门的分布式缓存服务器上的远程缓存&lt;br&gt;&lt;strong&gt;4. 使用应用服务器集群改善网站的并发处理能力&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/04.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;负载均衡调度服务器&lt;br&gt;&lt;strong&gt;5. 数据库读写分离&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/05.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;cobar amoeba mysql自带的主从同步&lt;br&gt;&lt;strong&gt;6. 使用反向代理和CDN加速网站响应&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/06.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;CND和反向代理的基本原理都是缓存，CDN部署在网络提供商的机房，使用户在请求网站服务时，可以从距离自己最近的网络提供商机房获取数据；反向代理部署在网站的中心机房，当用户请求到达中心机房后，首先访问的服务器是反向代理服务器，如果反向代理服务器中缓存着用户请求的资源，就直接返回给用户&lt;br&gt;&lt;strong&gt;7. 使用分布式文件系统和分布式数据库系统&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/07.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;8. 使用NoSQL和搜索引擎&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/08.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;strong&gt;9. 业务拆分&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/09.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;strong&gt;10. 分布式服务&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150808/10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt; &lt;h2 id=&quot;大型网站架构演化的价值观&quot;&gt;&lt;a href=&quot;#大型网站架构演化的价值观&quot; class=&quot;headerlink&quot; title=&quot;大型网站架构演化的价值观&quot;&gt;&lt;/a&gt;大型网站架构演化的价值观&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;大型网站机构技术的核心价值是随网站所需灵活应对&lt;/li&gt; &lt;li&gt;驱动大型网站技术发展的主要力量是网站的业务发展&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;网站机构设计误区&quot;&gt;&lt;a href=&quot;#网站机构设计误区&quot; class=&quot;headerlink&quot; title=&quot;网站机构设计误区&quot;&gt;&lt;/a&gt;网站机构设计误区&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;一味追随大公司的解决方案&lt;/li&gt; &lt;li&gt;为了技术而技术&lt;/li&gt; &lt;li&gt;企图用技术解决所有问题&lt;/li&gt; &lt;/ol&gt;</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;大型网站系统软件的特点&quot;&gt;&lt;a href=&quot;#大型网站系统软件的特点&quot; class=&quot;headerlink&quot; title=&quot;大型网站系统软件的特点&quot;&gt;&lt;/a&gt;大型网站系统软件的特点&lt;/h2&gt;&lt;ol&gt; &lt;li&gt;高并发，大流量 &lt;/li&gt; &lt;li&gt;高可用&lt;/li&gt; &lt;li&gt;海量数据&lt;/li&gt; &lt;li&gt;用户分布广泛，网络情况复杂&lt;/li&gt; &lt;li&gt;安全环境恶劣&lt;/li&gt; &lt;li&gt;需求快速变更，发布频繁&lt;/li&gt; &lt;li&gt;渐进式发展&lt;/li&gt; &lt;/ol&gt;
    
    </summary>
    
      <category term="读书笔记" scheme="http://www.cobala.cn/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="大型网站技术架构" scheme="http://www.cobala.cn/tags/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84/"/>
    
      <category term=" 读书笔记" scheme="http://www.cobala.cn/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>GoAgent和Heroku搭建翻墙</title>
    <link href="http://www.cobala.cn/2015/07/12/GoAgent%E5%92%8CHeroku%E6%90%AD%E5%BB%BA%E7%BF%BB%E5%A2%99/"/>
    <id>http://www.cobala.cn/2015/07/12/GoAgent和Heroku搭建翻墙/</id>
    <published>2015-07-12T02:08:34.000Z</published>
    <updated>2016-05-24T11:07:29.019Z</updated>
    
    <content type="html">&lt;p&gt;以前一直使用goagent翻墙 使用gmail或者搜索一些资料，最近goagent使用GAE一直无法访问google，看到goagent支持PHP代理，就萌生了使用免费的空间Heroku 搭建PHP代理，下面介绍下主要步骤。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt; &lt;h3 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;下载最新版 &lt;strong&gt;&lt;a href=&quot;https://github.com/goagent/goagent&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;goagent3.2.3&lt;/a&gt;&lt;/strong&gt; &lt;/li&gt; &lt;li&gt;去&lt;strong&gt;&lt;a href=&quot;https://dashboard.heroku.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Heroku&lt;/a&gt;&lt;/strong&gt;注册一个账号&lt;/li&gt; &lt;li&gt;如果没有&lt;strong&gt;&lt;a href=&quot;https://github.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github&lt;/a&gt;&lt;/strong&gt;账号的自己注册一个，已经有的跳过&lt;/li&gt; &lt;li&gt;Fork资源&lt;strong&gt;&lt;a href=&quot;https://github.com/dzhai/php-getting-started&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;php-getting-started&lt;/a&gt;&lt;/strong&gt;到自己的Gitgub账号下&lt;h3 id=&quot;创建Heroku-APP&quot;&gt;&lt;a href=&quot;#创建Heroku-APP&quot; class=&quot;headerlink&quot; title=&quot;创建Heroku APP&quot;&gt;&lt;/a&gt;创建Heroku APP&lt;/h3&gt;&lt;/li&gt; &lt;li&gt;进去Heroku 控制面板 &lt;a href=&quot;https://dashboard.heroku.com/apps&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://dashboard.heroku.com/apps&lt;/a&gt; &lt;/li&gt; &lt;li&gt;创建一个APP &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;2.1 添加一个APP&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150712/heroku_01.png&quot; alt=&quot;&quot;&gt; &lt;/p&gt; &lt;p&gt;2.2 设置APP名称&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150712/heroku_02.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt; &lt;p&gt;2.3 选择部署方式 Github&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150712/heroku_03.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt; &lt;p&gt;2.4 选择部署的资源&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150712/heroku_04.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt; &lt;p&gt;2.5 设置部署选项&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150712/heroku_05.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt; &lt;p&gt;2.6 部署成功&lt;br&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150712/heroku_06.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt; &lt;h3 id=&quot;修改Goagent配置文件&quot;&gt;&lt;a href=&quot;#修改Goagent配置文件&quot; class=&quot;headerlink&quot; title=&quot;修改Goagent配置文件&quot;&gt;&lt;/a&gt;修改Goagent配置文件&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;复制Heroku APP访问地址 &lt;a href=&quot;https://goagentphp.herokuapp.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://goagentphp.herokuapp.com/&lt;/a&gt;&lt;/li&gt; &lt;li&gt;打开goagent配置文件 proxy.ini&lt;/li&gt; &lt;li&gt;修改PHP的设置&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enable&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;fetchserver&lt;/span&gt; = https://goagentphp.herokuapp.com/&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;/index.php&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;img src=&quot;http://7xjq6x.com1.z0.glb.clouddn.com/20150712/heroku_08.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt; &lt;h3 id=&quot;配置Chrome浏览器插件&quot;&gt;&lt;a href=&quot;#配置Chrome浏览器插件&quot; class=&quot;headerlink&quot; title=&quot;配置Chrome浏览器插件&quot;&gt;&lt;/a&gt;配置Chrome浏览器插件&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;安装chrome浏览器插件 请看Goagen 官方介绍 &lt;a href=&quot;https://github.com/goagent/goagent/blob/wiki/InstallGuide.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gogent wiki&lt;/a&gt;&lt;br&gt;注意证书的安装&lt;/li&gt; &lt;li&gt;使用Goagent PHP代理&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;我配置的Goagent&quot;&gt;&lt;a href=&quot;#我配置的Goagent&quot; class=&quot;headerlink&quot; title=&quot;我配置的Goagent&quot;&gt;&lt;/a&gt;我配置的Goagent&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;下载地址 &lt;a href=&quot;http://pan.baidu.com/s/1hq4GZ7u&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://pan.baidu.com/s/1hq4GZ7u&lt;/a&gt;&lt;/li&gt; &lt;li&gt;经过本人测试在youtube上看视频微卡，最好改改Heroku的代理路径，人多卡&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;link&quot;&gt;&lt;a href=&quot;#link&quot; class=&quot;headerlink&quot; title=&quot;link&quot;&gt;&lt;/a&gt;link&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;&lt;a href=&quot;https://github.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/goagent/goagent&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Goagent Wiki&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dashboard.heroku.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Heroku&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;以前一直使用goagent翻墙 使用gmail或者搜索一些资料，最近goagent使用GAE一直无法访问google，看到goagent支持PHP代理，就萌生了使用免费的空间Heroku 搭建PHP代理，下面介绍下主要步骤。&lt;br&gt;
    
    </summary>
    
      <category term="工具使用" scheme="http://www.cobala.cn/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="goagent" scheme="http://www.cobala.cn/tags/goagent/"/>
    
      <category term="heroku" scheme="http://www.cobala.cn/tags/heroku/"/>
    
  </entry>
  
  <entry>
    <title>Windows下定时删除文件</title>
    <link href="http://www.cobala.cn/2015/03/03/Windows%E4%B8%8B%E5%AE%9A%E6%97%B6%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6/"/>
    <id>http://www.cobala.cn/2015/03/03/Windows下定时删除文件/</id>
    <published>2015-03-03T02:08:34.000Z</published>
    <updated>2016-05-24T11:07:29.016Z</updated>
    
    <content type="html">&lt;p&gt;###直接上bat&lt;br&gt;&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;::取&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;天之前的日期.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;deldata_zw.zhu.vbs &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; wscript.&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; dateadd(&quot;d&quot;,-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;built_in&quot;&gt;date&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; /f &quot;tokens=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;* delims=-&quot; &lt;span class=&quot;variable&quot;&gt;%%i&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&#39;cscript /nologo deldata_zw.zhu.vbs&#39;) &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; y=&lt;span class=&quot;variable&quot;&gt;%%i&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; m=&lt;span class=&quot;variable&quot;&gt;%%j&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; d=&lt;span class=&quot;variable&quot;&gt;%%k&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;%m%&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;LSS&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; m=&lt;span class=&quot;variable&quot;&gt;%m%&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;%d%&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;LSS&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; d=&lt;span class=&quot;variable&quot;&gt;%d%&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; rq=&lt;span class=&quot;variable&quot;&gt;%y%&lt;/span&gt;-&lt;span class=&quot;variable&quot;&gt;%m%&lt;/span&gt;-&lt;span class=&quot;variable&quot;&gt;%d%&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 注意:即将删除 &lt;span class=&quot;variable&quot;&gt;%rq%&lt;/span&gt; 以前建立的文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;pause&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;::判断文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; /f &quot;delims=&quot; &lt;span class=&quot;variable&quot;&gt;%%i&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&#39;&lt;span class=&quot;built_in&quot;&gt;dir&lt;/span&gt; /a-d /b /s E:\test\*.sql&#39;) &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;%%~&lt;/span&gt;ti &lt;span class=&quot;keyword&quot;&gt;lss&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;%rq%&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;del&lt;/span&gt; /f /q &quot;&lt;span class=&quot;variable&quot;&gt;%%i&lt;/span&gt;&quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;del&lt;/span&gt; deldata_zw.zhu.vbs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;pause&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###Note&lt;br&gt;先在cmd命令中看看自己系统日期的格式化 &lt;strong&gt;date&lt;/strong&gt; 和 &lt;strong&gt;time&lt;/strong&gt;&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;###直接上bat&lt;br&gt;&lt;figure class=&quot;highlight dos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;
    
    </summary>
    
      <category term="环境配置" scheme="http://www.cobala.cn/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="Windows" scheme="http://www.cobala.cn/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>数据结构与算法第一天</title>
    <link href="http://www.cobala.cn/2015/03/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%9501/"/>
    <id>http://www.cobala.cn/2015/03/03/数据结构与算法01/</id>
    <published>2015-03-03T02:08:34.000Z</published>
    <updated>2016-05-24T11:07:29.018Z</updated>
    
    <content type="html">&lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th style=&quot;text-align:left&quot;&gt;数据结构&lt;/th&gt; &lt;th style=&quot;text-align:right&quot;&gt;优点&lt;/th&gt; &lt;th style=&quot;text-align:center&quot;&gt;缺点&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;数组&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;插入快(知道下标)&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;查找慢，删除慢，大小固定&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;有序数组&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;比无序的数组查找快&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;删除和插入慢，大小固定&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;栈&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;提供后进先出的存取方式&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;存取其他项很慢&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;队列&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;提供先进先出的存取方式&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;存取其他项很慢&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;链表&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;提供后进先出的存取方式&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;存取其他项很慢&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;二叉树&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;查找 插入 删除都快(树平衡的情况下)&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;删除算法复制&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;红黑树(平衡树)&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;查找 插入 删除都快&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;算法复杂&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;2-3-4树(平衡树)&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;查找 插入 删除都快&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;算法复杂&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;哈希表&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;插入块，通过关键字存钱快&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;删除慢&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;堆&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;插入删除块，对最大输家项的存取快&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;对其他数据项存取慢&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left&quot;&gt;图&lt;/td&gt; &lt;td style=&quot;text-align:right&quot;&gt;对显示世界建模&lt;/td&gt; &lt;td style=&quot;text-align:center&quot;&gt;有些算法慢且复杂&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt;</content>
    
    <summary type="html">
    
      &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th style=&quot;text-align:left&quot;&gt;数据结构&lt;/th&gt; &lt;th style=&quot;text-align:right&quot;&gt;优点&lt;/th&gt; &lt;th style=&quot;text-align:center&quot;&gt;缺点&lt;/th&gt; &lt;/tr&gt; 
    
    </summary>
    
      <category term="数据结构与算法" scheme="http://www.cobala.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="数据结构" scheme="http://www.cobala.cn/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="算法" scheme="http://www.cobala.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Windows下备份mysql数据库脚本</title>
    <link href="http://www.cobala.cn/2015/02/28/Windows%E4%B8%8B%E5%A4%87%E4%BB%BDmysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%84%9A%E6%9C%AC/"/>
    <id>http://www.cobala.cn/2015/02/28/Windows下备份mysql数据库脚本/</id>
    <published>2015-02-28T02:08:34.000Z</published>
    <updated>2016-05-24T11:07:29.015Z</updated>
    
    <content type="html">&lt;p&gt;###直接上bat&lt;br&gt;&lt;figure class=&quot;highlight gcode&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@echo off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set yMd=&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;date:~,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;-&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;date:~&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;-&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;date:~&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;_&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set HH=&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;TIME:~&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;TIME:~&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt; leq &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;(set HH=0%TIME:~1,1%)&lt;/span&gt;else set HH=&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;TIME:~&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set mmss=-&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;TIME:~&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;-&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;TIME:~&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set datetime=&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;yMd&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;HH&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;mmss&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;D:\Program Files\MySQL\MySQL Server 5.6\bin\mysqldump&quot;&lt;/span&gt; --opt -u root --password=root dzhaidb &amp;gt; D:\db_bak\baibaydb\dzhaidb_&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;datetime&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;.sql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@echo o&lt;span class=&quot;symbol&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###Note&lt;br&gt;先在cmd命令中看看自己系统日期的格式化 &lt;strong&gt;date&lt;/strong&gt; 和 &lt;strong&gt;time&lt;/strong&gt;&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;###直接上bat&lt;br&gt;&lt;figure class=&quot;highlight gcode&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span
    
    </summary>
    
      <category term="环境配置" scheme="http://www.cobala.cn/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="Windows" scheme="http://www.cobala.cn/tags/Windows/"/>
    
      <category term="mysql" scheme="http://www.cobala.cn/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Windows下Apache的常用操作</title>
    <link href="http://www.cobala.cn/2015/02/26/Windows%E4%B8%8BApache%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"/>
    <id>http://www.cobala.cn/2015/02/26/Windows下Apache常用操作/</id>
    <published>2015-02-26T13:15:57.000Z</published>
    <updated>2016-05-24T11:07:29.014Z</updated>
    
    <content type="html">&lt;h3 id=&quot;配置代理&quot;&gt;&lt;a href=&quot;#配置代理&quot; class=&quot;headerlink&quot; title=&quot;配置代理&quot;&gt;&lt;/a&gt;配置代理&lt;/h3&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;找到配置文件httpd&lt;span class=&quot;selector-class&quot;&gt;.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;打开模块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule proxy_module modules/mod_proxy&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule proxy_http_module modules/mod_proxy_http&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在文件的最下方添加&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NameVirtualHost *:&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;VirtualHost *:&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ServerName www&lt;span class=&quot;selector-class&quot;&gt;.dzhai&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.net&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ProxyPass / http:&lt;span class=&quot;comment&quot;&gt;//127.0.0.1:8080/dzhai-blog&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ProxyPassReverse / http:&lt;span class=&quot;comment&quot;&gt;//192.168.1.201:8080/dzhai-blog&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ProxyPassReverseCookiePath /dzhai-blog /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/VirtualHost&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;说明 ProxyPassReverseCookiePath /dzhai-blog / 配置cookie 地址，如果不配置会使session过期，如果访问地址和代理地址都是同一级目录可以不配置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;p&gt;###动态的添加Header 参数&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;打开模块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule headers_module modules/mod_headers&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;Proxy http:&lt;span class=&quot;comment&quot;&gt;//127.0.0.1:8080/dzhai-blog/*&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RequestHeader add Root_ContextPath &lt;span class=&quot;string&quot;&gt;&quot;/dzhai-blog&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/Proxy&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###将根域名重定向到子域名&lt;br&gt;&lt;figure class=&quot;highlight dust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;打开模块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule rewrite_module modules/mod_rewrite.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;VirtualHost&lt;/span&gt; *&lt;span class=&quot;attr&quot;&gt;:80&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ServerName dzhai.net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RewriteEngine on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #RewriteCond %&lt;/span&gt;&lt;span class=&quot;template-variable&quot;&gt;&amp;#123;SERVER_PORT&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt; !^80$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RewriteRule ^.*$ http://www.%&lt;/span&gt;&lt;span class=&quot;template-variable&quot;&gt;&amp;#123;SERVER_NAME&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;template-variable&quot;&gt;&amp;#123;REQUEST_URI&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt; [L,R]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;VirtualHost&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;配置代理&quot;&gt;&lt;a href=&quot;#配置代理&quot; class=&quot;headerlink&quot; title=&quot;配置代理&quot;&gt;&lt;/a&gt;配置代理&lt;/h3&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;找到配置文件httpd&lt;span class=&quot;selector-class&quot;&gt;.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;打开模块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule proxy_module modules/mod_proxy&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule proxy_http_module modules/mod_proxy_http&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在文件的最下方添加&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NameVirtualHost *:&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;VirtualHost *:&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ServerName www&lt;span class=&quot;selector-class&quot;&gt;.dzhai&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.net&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ProxyPass / http:&lt;span class=&quot;comment&quot;&gt;//127.0.0.1:8080/dzhai-blog&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ProxyPassReverse / http:&lt;span class=&quot;comment&quot;&gt;//192.168.1.201:8080/dzhai-blog&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ProxyPassReverseCookiePath /dzhai-blog /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/VirtualHost&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;说明 ProxyPassReverseCookiePath /dzhai-blog / 配置cookie 地址，如果不配置会使session过期，如果访问地址和代理地址都是同一级目录可以不配置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;p&gt;###动态的添加Header 参数&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;打开模块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule headers_module modules/mod_headers&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;Proxy http:&lt;span class=&quot;comment&quot;&gt;//127.0.0.1:8080/dzhai-blog/*&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RequestHeader add Root_ContextPath &lt;span class=&quot;string&quot;&gt;&quot;/dzhai-blog&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/Proxy&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###将根域名重定向到子域名&lt;br&gt;&lt;figure class=&quot;highlight dust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;打开模块&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule rewrite_module modules/mod_rewrite.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;VirtualHost&lt;/span&gt; *&lt;span class=&quot;attr&quot;&gt;:80&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ServerName dzhai.net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RewriteEngine on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #RewriteCond %&lt;/span&gt;&lt;span class=&quot;template-variable&quot;&gt;&amp;#123;SERVER_PORT&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt; !^80$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RewriteRule ^.*$ http://www.%&lt;/span&gt;&lt;span class=&quot;template-variable&quot;&gt;&amp;#123;SERVER_NAME&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;template-variable&quot;&gt;&amp;#123;REQUEST_URI&amp;#125;&lt;/span&gt;&lt;span class=&quot;xml&quot;&gt; [L,R]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;VirtualHost&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="环境配置" scheme="http://www.cobala.cn/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="Windows" scheme="http://www.cobala.cn/tags/Windows/"/>
    
      <category term="Apache" scheme="http://www.cobala.cn/tags/Apache/"/>
    
  </entry>
  
  <entry>
    <title>Windows下配置Java环境变量</title>
    <link href="http://www.cobala.cn/2015/02/13/Windows%E4%B8%8B%E9%85%8D%E7%BD%AEJava%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    <id>http://www.cobala.cn/2015/02/13/Windows下配置Java环境变量/</id>
    <published>2015-02-13T13:17:39.000Z</published>
    <updated>2016-05-24T11:07:29.013Z</updated>
    
    <content type="html">&lt;p&gt;###环境变量&lt;br&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;添加环境变量JAVA_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_HOME=&lt;span class=&quot;symbol&quot;&gt;C:&lt;/span&gt;\Program Files\Java\jdk1.&lt;span class=&quot;number&quot;&gt;7.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;添加环境变量CLASSPATH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CLASSPATH=.;%JAVA_HOME%\&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;lib&lt;/span&gt;\&lt;span class=&quot;title&quot;&gt;dt&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;jar&lt;/span&gt;;&lt;/span&gt;%JAVA_HOME%\&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;lib&lt;/span&gt;\&lt;span class=&quot;title&quot;&gt;tools&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;jar&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在Path 后面追加内容&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Path=%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;###环境变量&lt;br&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;添加环境变量JAVA_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_HOME=&lt;span class=&quot;symbol&quot;&gt;C:&lt;/span&gt;\Program Files\Java\jdk1.&lt;span class=&quot;number&quot;&gt;7.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;添加环境变量CLASSPATH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CLASSPATH=.;%JAVA_HOME%\&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;lib&lt;/span&gt;\&lt;span class=&quot;title&quot;&gt;dt&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;jar&lt;/span&gt;;&lt;/span&gt;%JAVA_HOME%\&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;lib&lt;/span&gt;\&lt;span class=&quot;title&quot;&gt;tools&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;jar&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在Path 后面追加内容&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Path=%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="环境配置" scheme="http://www.cobala.cn/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="WIndows" scheme="http://www.cobala.cn/tags/WIndows/"/>
    
  </entry>
  
  <entry>
    <title>Windows下tomcat的常用操作</title>
    <link href="http://www.cobala.cn/2015/02/13/Windows%E4%B8%8Btomcat%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"/>
    <id>http://www.cobala.cn/2015/02/13/Windows下tomcat的常用操作/</id>
    <published>2015-02-13T13:15:57.000Z</published>
    <updated>2016-05-24T11:07:29.011Z</updated>
    
    <content type="html">&lt;h3 id=&quot;免安装版设置内存&quot;&gt;&lt;a href=&quot;#免安装版设置内存&quot; class=&quot;headerlink&quot; title=&quot;免安装版设置内存&quot;&gt;&lt;/a&gt;免安装版设置内存&lt;/h3&gt;&lt;figure class=&quot;highlight nix&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;在catalina.bat 的首行中添加 如下配置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set &lt;span class=&quot;attr&quot;&gt;JAVA_OPTS=-Xms512m&lt;/span&gt; -Xmx512m -XX:&lt;span class=&quot;attr&quot;&gt;PermSize=128m&lt;/span&gt; -XX:&lt;span class=&quot;attr&quot;&gt;MaxPermSize=256m&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h3 id=&quot;配置Windows-服务&quot;&gt;&lt;a href=&quot;#配置Windows-服务&quot; class=&quot;headerlink&quot; title=&quot;配置Windows 服务&quot;&gt;&lt;/a&gt;配置Windows 服务&lt;/h3&gt;&lt;figure class=&quot;highlight haml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;安装服务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;service.bat instart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;删除服务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;service.bat remove&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;设置windows 服务的JVM参数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 启动下tomcat服务 查看是否启动成功&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2 找到打开tomcat7w.exe--&amp;gt;点击 java tab &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在java Options下添加&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;Xms512m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;-&lt;span class=&quot;ruby&quot;&gt;Xmx512m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;-&lt;span class=&quot;ruby&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;XX:&lt;/span&gt;PermSize=&lt;span class=&quot;number&quot;&gt;128&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;-&lt;span class=&quot;ruby&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;XX:&lt;/span&gt;MaxPermSize=&lt;span class=&quot;number&quot;&gt;256&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;每一行后面不能有空格&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;!--more--&gt;</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;免安装版设置内存&quot;&gt;&lt;a href=&quot;#免安装版设置内存&quot; class=&quot;headerlink&quot; title=&quot;免安装版设置内存&quot;&gt;&lt;/a&gt;免安装版设置内存&lt;/h3&gt;&lt;figure class=&quot;highlight nix&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;在catalina.bat 的首行中添加 如下配置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set &lt;span class=&quot;attr&quot;&gt;JAVA_OPTS=-Xms512m&lt;/span&gt; -Xmx512m -XX:&lt;span class=&quot;attr&quot;&gt;PermSize=128m&lt;/span&gt; -XX:&lt;span class=&quot;attr&quot;&gt;MaxPermSize=256m&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;h3 id=&quot;配置Windows-服务&quot;&gt;&lt;a href=&quot;#配置Windows-服务&quot; class=&quot;headerlink&quot; title=&quot;配置Windows 服务&quot;&gt;&lt;/a&gt;配置Windows 服务&lt;/h3&gt;&lt;figure class=&quot;highlight haml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;安装服务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;service.bat instart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;删除服务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;service.bat remove&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;设置windows 服务的JVM参数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 启动下tomcat服务 查看是否启动成功&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2 找到打开tomcat7w.exe--&amp;gt;点击 java tab &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在java Options下添加&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;Xms512m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;-&lt;span class=&quot;ruby&quot;&gt;Xmx512m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;-&lt;span class=&quot;ruby&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;XX:&lt;/span&gt;PermSize=&lt;span class=&quot;number&quot;&gt;128&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;-&lt;span class=&quot;ruby&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;XX:&lt;/span&gt;MaxPermSize=&lt;span class=&quot;number&quot;&gt;256&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;每一行后面不能有空格&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="环境配置" scheme="http://www.cobala.cn/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="Tomcat" scheme="http://www.cobala.cn/tags/Tomcat/"/>
    
      <category term="Windows" scheme="http://www.cobala.cn/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Windows 安装wget命令</title>
    <link href="http://www.cobala.cn/2015/02/05/Windows-%E5%AE%89%E8%A3%85wget%E5%91%BD%E4%BB%A4/"/>
    <id>http://www.cobala.cn/2015/02/05/Windows-安装wget命令/</id>
    <published>2015-02-05T06:20:20.000Z</published>
    <updated>2016-05-24T11:07:29.010Z</updated>
    
    <content type="html">&lt;p&gt;###安装wget&lt;br&gt;网址：&lt;a href=&quot;http://gnuwin32.sourceforge.net/packages/wget.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gnuwin32.sourceforge.net/packages/wget.htm&lt;/a&gt;&lt;br&gt;下载 &lt;a href=&quot;http://downloads.sourceforge.net/gnuwin32/wget-1.11.4-1-setup.exe&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://downloads.sourceforge.net/gnuwin32/wget-1.11.4-1-setup.exe&lt;/a&gt;&lt;/p&gt; &lt;p&gt;###系统环境变量&lt;br&gt;&lt;figure class=&quot;highlight taggerscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;新建变量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GNU_HOME=C:&lt;span class=&quot;symbol&quot;&gt;\P&lt;/span&gt;rogram Files&lt;span class=&quot;symbol&quot;&gt;\G&lt;/span&gt;nuWin32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在path添加&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;;&lt;span class=&quot;variable&quot;&gt;%GNU_HOME%&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;\b&lt;/span&gt;in&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;###安装wget&lt;br&gt;网址：&lt;a href=&quot;http://gnuwin32.sourceforge.net/packages/wget.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gnuwin32.sourceforge.ne
    
    </summary>
    
      <category term="环境配置" scheme="http://www.cobala.cn/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
  </entry>
  
  <entry>
    <title>ConOS6.5  安装Oracle JDK 和 Tomcat</title>
    <link href="http://www.cobala.cn/2014/12/17/%E5%AE%89%E8%A3%85JDK-Tomcat-CenSO6-5/"/>
    <id>http://www.cobala.cn/2014/12/17/安装JDK-Tomcat-CenSO6-5/</id>
    <published>2014-12-17T01:54:39.000Z</published>
    <updated>2016-05-24T11:07:29.008Z</updated>
    
    <content type="html">&lt;p&gt;##安装JDK&lt;/p&gt; &lt;p&gt;###下载Oracle JDK 1.7&lt;br&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;点击下载tag.gz文件&lt;/a&gt; &lt;/p&gt; &lt;p&gt;###复制到 /opt目录 下并解压&lt;br&gt;&lt;figure class=&quot;highlight vala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*复制*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# cp jdk-7u71-linux-x64.tar.gz /opt/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*解压*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# tar -zxvf jdk-7u71-linux-x64.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###配置全局环境变量&lt;br&gt; 在 &lt;code&gt;/etc/profile&lt;/code&gt;文件 内追加以下内容&lt;/p&gt; &lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# jdk7 settings&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/jdk&lt;/span&gt;1.&lt;span class=&quot;number&quot;&gt;7.0_71&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JRE_HOME=$JAVA_HOME/jre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PATH=$&lt;span class=&quot;symbol&quot;&gt;PATH:&lt;/span&gt;$JAVA_HOME/&lt;span class=&quot;symbol&quot;&gt;bin:&lt;/span&gt;$JRE_HOME/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CLASSPATH=:$JAVA_HOME/&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;lib&lt;/span&gt;/&lt;span class=&quot;title&quot;&gt;dt&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;jar&lt;/span&gt;:$&lt;span class=&quot;title&quot;&gt;JAVA_HOME&lt;/span&gt;/&lt;span class=&quot;title&quot;&gt;lib&lt;/span&gt;/&lt;span class=&quot;title&quot;&gt;tools&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;jar&lt;/span&gt;:$&lt;span class=&quot;title&quot;&gt;JRE_HOME&lt;/span&gt;/&lt;span class=&quot;title&quot;&gt;lib&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME JRE_HOME PATH CLASSPATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;p&gt;然后执行 &lt;code&gt;source /etc/profile&lt;/code&gt; 使配置生效。&lt;/p&gt; &lt;p&gt;###在 /sbin目录 下建立java的软链接&lt;br&gt;此时我们在shell中输入java命令，将提示/usr/bin中找不到java命令，那是因为我们还没为$JAVA_HOME/bin/java在/sbin目录下建立软链接&lt;br&gt;&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ln -s &lt;span class=&quot;meta-keyword&quot;&gt;/opt/&lt;/span&gt;jdk1&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;_71&lt;span class=&quot;meta-keyword&quot;&gt;/bin/&lt;/span&gt;java &lt;span class=&quot;meta-keyword&quot;&gt;/sbin/&lt;/span&gt;java&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;到这里Oracle JDK1.7的安装已完成了！&lt;/p&gt; &lt;p&gt;##安装Tomcat7&lt;/p&gt; &lt;p&gt;###下载并解压到 /opt目录 下&lt;br&gt;&lt;a href=&quot;http://archive.apache.org/dist/tomcat/tomcat-7/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;点击下载 tar.gz&lt;/a&gt;&lt;/p&gt; &lt;p&gt;###在 &lt;code&gt;catalina.sh&lt;/code&gt;文件 最顶添加如下内容&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; TOMCAT_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/&lt;/span&gt;apache-tomcat&lt;span class=&quot;number&quot;&gt;-7.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.55&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; CATALINA_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/&lt;/span&gt;apache-tomcat&lt;span class=&quot;number&quot;&gt;-7.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.55&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; JRE_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/&lt;/span&gt;jdk1&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;_71/jre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; JAVA_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/&lt;/span&gt;jdk1&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;_71&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###让tomcat开机启动&lt;br&gt;编辑 /etc/rc.d/rc.local&lt;br&gt;&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo vi /etc/rc.d/rc.&lt;span class=&quot;keyword&quot;&gt;local&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;加入如下内容：&lt;br&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME=&lt;span class=&quot;regexp&quot;&gt;/usr/local&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/jdk1.7.0_71 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/opt&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/apache-tomcat-7.0.55/bin&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/startup.sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###设置Tomcat 内存大小&lt;br&gt;要添加在tomcat 的bin 下catalina.sh 里，位置cygwin=false前 。注意引号要带上&lt;br&gt;&lt;figure class=&quot;highlight lasso&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;OS specific support. $var _must_ be &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; either &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_OPTS=&lt;span class=&quot;string&quot;&gt;&#39;-Xms1024m -Xmx1024m -Xss1024K -XX:PermSize=256M -XX:MaxNewSize=512m -XX:MaxPermSize=256m&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cygwin=&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;hr&gt; &lt;p&gt;###Link&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/fsjohnhuang/p/3989418.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/fsjohnhuang/p/3989418.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/zhngjan/article/details/25223423&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/zhngjan/article/details/25223423&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/fengyie007/article/details/1780375&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/fengyie007/article/details/1780375&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/fengyie007/article/details/1776257&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/fengyie007/article/details/1776257&lt;/a&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;##安装JDK&lt;/p&gt; &lt;p&gt;###下载Oracle JDK 1.7&lt;br&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;点击下载tag.gz文件&lt;/a&gt; &lt;/p&gt; &lt;p&gt;###复制到 /opt目录 下并解压&lt;br&gt;&lt;figure class=&quot;highlight vala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*复制*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# cp jdk-7u71-linux-x64.tar.gz /opt/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*解压*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# tar -zxvf jdk-7u71-linux-x64.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###配置全局环境变量&lt;br&gt; 在 &lt;code&gt;/etc/profile&lt;/code&gt;文件 内追加以下内容&lt;/p&gt; &lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# jdk7 settings&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/jdk&lt;/span&gt;1.&lt;span class=&quot;number&quot;&gt;7.0_71&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JRE_HOME=$JAVA_HOME/jre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PATH=$&lt;span class=&quot;symbol&quot;&gt;PATH:&lt;/span&gt;$JAVA_HOME/&lt;span class=&quot;symbol&quot;&gt;bin:&lt;/span&gt;$JRE_HOME/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CLASSPATH=:$JAVA_HOME/&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;lib&lt;/span&gt;/&lt;span class=&quot;title&quot;&gt;dt&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;jar&lt;/span&gt;:$&lt;span class=&quot;title&quot;&gt;JAVA_HOME&lt;/span&gt;/&lt;span class=&quot;title&quot;&gt;lib&lt;/span&gt;/&lt;span class=&quot;title&quot;&gt;tools&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;jar&lt;/span&gt;:$&lt;span class=&quot;title&quot;&gt;JRE_HOME&lt;/span&gt;/&lt;span class=&quot;title&quot;&gt;lib&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME JRE_HOME PATH CLASSPATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; &lt;p&gt;然后执行 &lt;code&gt;source /etc/profile&lt;/code&gt; 使配置生效。&lt;/p&gt; &lt;p&gt;###在 /sbin目录 下建立java的软链接&lt;br&gt;此时我们在shell中输入java命令，将提示/usr/bin中找不到java命令，那是因为我们还没为$JAVA_HOME/bin/java在/sbin目录下建立软链接&lt;br&gt;&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ln -s &lt;span class=&quot;meta-keyword&quot;&gt;/opt/&lt;/span&gt;jdk1&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;_71&lt;span class=&quot;meta-keyword&quot;&gt;/bin/&lt;/span&gt;java &lt;span class=&quot;meta-keyword&quot;&gt;/sbin/&lt;/span&gt;java&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;到这里Oracle JDK1.7的安装已完成了！&lt;/p&gt; &lt;p&gt;##安装Tomcat7&lt;/p&gt; &lt;p&gt;###下载并解压到 /opt目录 下&lt;br&gt;&lt;a href=&quot;http://archive.apache.org/dist/tomcat/tomcat-7/&quot;&gt;点击下载 tar.gz&lt;/a&gt;&lt;/p&gt; &lt;p&gt;###在 &lt;code&gt;catalina.sh&lt;/code&gt;文件 最顶添加如下内容&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; TOMCAT_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/&lt;/span&gt;apache-tomcat&lt;span class=&quot;number&quot;&gt;-7.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.55&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; CATALINA_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/&lt;/span&gt;apache-tomcat&lt;span class=&quot;number&quot;&gt;-7.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.55&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; JRE_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/&lt;/span&gt;jdk1&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;_71/jre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; JAVA_HOME=&lt;span class=&quot;regexp&quot;&gt;/opt/&lt;/span&gt;jdk1&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;_71&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###让tomcat开机启动&lt;br&gt;编辑 /etc/rc.d/rc.local&lt;br&gt;&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo vi /etc/rc.d/rc.&lt;span class=&quot;keyword&quot;&gt;local&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;加入如下内容：&lt;br&gt;&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME=&lt;span class=&quot;regexp&quot;&gt;/usr/local&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/jdk1.7.0_71 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/opt&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/apache-tomcat-7.0.55/bin&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/startup.sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;p&gt;###设置Tomcat 内存大小&lt;br&gt;要添加在tomcat 的bin 下catalina.sh 里，位置cygwin=false前 。注意引号要带上&lt;br&gt;&lt;figure class=&quot;highlight lasso&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;OS specific support. $var _must_ be &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; either &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_OPTS=&lt;span class=&quot;string&quot;&gt;&#39;-Xms1024m -Xmx1024m -Xss1024K -XX:PermSize=256M -XX:MaxNewSize=512m -XX:MaxPermSize=256m&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cygwin=&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt; &lt;hr&gt; &lt;p&gt;###Link&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/fsjohnhuang/p/3989418.html&quot;&gt;http://www.cnblogs.com/fsjohnhuang/p/3989418.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/zhngjan/article/details/25223423&quot;&gt;http://blog.csdn.net/zhngjan/article/details/25223423&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/fengyie007/article/details/1780375&quot;&gt;http://blog.csdn.net/fengyie007/article/details/1780375&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/fengyie007/article/details/1776257&quot;&gt;http://blog.csdn.net/fengyie007/article/details/1776257&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
      <category term="环境配置" scheme="http://www.cobala.cn/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="JDK" scheme="http://www.cobala.cn/tags/JDK/"/>
    
      <category term="Tomcat" scheme="http://www.cobala.cn/tags/Tomcat/"/>
    
      <category term="CenOS" scheme="http://www.cobala.cn/tags/CenOS/"/>
    
  </entry>
  
  <entry>
    <title>简单工厂</title>
    <link href="http://www.cobala.cn/2014/11/10/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82/"/>
    <id>http://www.cobala.cn/2014/11/10/简单工厂/</id>
    <published>2014-11-10T02:23:26.000Z</published>
    <updated>2016-05-24T11:07:29.007Z</updated>
    
    <content type="html">&lt;h3 id=&quot;简单工厂&quot;&gt;&lt;a href=&quot;#简单工厂&quot; class=&quot;headerlink&quot; title=&quot;简单工厂&quot;&gt;&lt;/a&gt;简单工厂&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;&lt;p&gt;定义&lt;br&gt;简单工厂模式是类的创建模式，又叫做静态工厂方法（Static Factory Method）模式。简单工厂模式是由一个工厂对象决定创建出哪一种产品类的实例 &lt;/p&gt; &lt;/li&gt; &lt;li&gt;&lt;p&gt;说明&lt;br&gt;假如应用系统需要支持多种登录方式如：口令认证、域认证（口令认证通常是去数据库中验证用户，而域认证则是需要到微软的域中验证用户）。那么自然的做法就是建立一个各种登录方式都适用的接口，如下图所示&lt;br&gt;&lt;img src=&quot;/resource/images/20151213/simplefactory.jpg&quot; alt=&quot;simplefactory&quot;&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h4 id=&quot;Link&quot;&gt;&lt;a href=&quot;#Link&quot; class=&quot;headerlink&quot; title=&quot;Link&quot;&gt;&lt;/a&gt;Link&lt;/h4&gt;&lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dzhai/design-pattern/tree/master/src/main/java/net/dzhai/dp/creational/simplefactory&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;源码地址&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/java-my-life/archive/2012/03/22/2412308.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;参考 java_my_life&lt;/a&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt;</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;简单工厂&quot;&gt;&lt;a href=&quot;#简单工厂&quot; class=&quot;headerlink&quot; title=&quot;简单工厂&quot;&gt;&lt;/a&gt;简单工厂&lt;/h3&gt;&lt;ol&gt; &lt;li&gt;&lt;p&gt;定义&lt;br&gt;简单工厂模式是类的创建模式，又叫做静态工厂方法（Static Factory Method）模式。简单工厂模式是由一个工厂对象决定创建出哪一种产品类的实例 &lt;/p&gt; &lt;/li&gt; &lt;li&gt;&lt;p&gt;说明&lt;br&gt;假如应用系统需要支持多种登录方式如：口令认证、域认证（口令认证通常是去数据库中验证用户，而域认证则是需要到微软的域中验证用户）。那么自然的做法就是建立一个各种登录方式都适用的接口，如下图所示&lt;br&gt;&lt;img src=&quot;/resource/images/20151213/simplefactory.jpg&quot; alt=&quot;simplefactory&quot;&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h4 id=&quot;Link&quot;&gt;&lt;a href=&quot;#Link&quot; class=&quot;headerlink&quot; title=&quot;Link&quot;&gt;&lt;/a&gt;Link&lt;/h4&gt;&lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dzhai/design-pattern/tree/master/src/main/java/net/dzhai/dp/creational/simplefactory&quot;&gt;源码地址&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/java-my-life/archive/2012/03/22/2412308.html&quot;&gt;参考 java_my_life&lt;/a&gt;
    
    </summary>
    
      <category term="设计模式" scheme="http://www.cobala.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="设计模式" scheme="http://www.cobala.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
</feed>
